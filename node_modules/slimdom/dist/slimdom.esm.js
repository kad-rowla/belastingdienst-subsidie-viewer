class t{constructor(t,n,e,r){this.source=null,this.observer=t,this.node=n,this.options=e,this.source=r||null,r&&t.t.push(this)}collectInterestedObservers(t,n,e,r,o){if(this.node!==n&&!this.options.subtree)return;if("attributes"===t&&!this.options.attributes)return;if("characterData"===t&&!this.options.characterData)return;if("childList"===t&&!this.options.childList)return;let i=r.indexOf(this.observer);i<0&&(i=r.length,r.push(this.observer),o.push(void 0)),("attributes"===t&&this.options.attributeOldValue||"characterData"===t&&this.options.characterDataOldValue)&&(o[i]=e.oldValue)}}class n{constructor(t){this.o=[],this.i=t}register(n,e){const r=this.o;let o=!1;r.forEach((t=>{t.observer===n&&(o=!0,function(t){for(let n=t.observer.t.length-1;n>=0;--n){const e=t.observer.t[n];if(e.source!==t)return;e.node.o.removeTransientRegisteredObserver(e),t.observer.t.splice(n,1)}}(t),t.options=e)})),o||(this.o.push(new t(n,this.i,e)),n.u.push(this.i))}removeTransientRegisteredObserver(t){this.o.splice(this.o.indexOf(t),1)}removeForObserver(t){let n=0;for(let e=0,r=this.o.length;e<r;++e){const r=this.o[e];r.observer!==t&&(e!==n&&(this.o[n]=r),++n)}this.o.length=n}collectInterestedObservers(t,n,e,r,o){this.o.forEach((i=>{i.collectInterestedObservers(t,n,e,r,o)}))}appendTransientRegisteredObservers(t){this.o.forEach((n=>{n.options.subtree&&t.o.registerTransient(n)}))}registerTransient(n){this.o.push(new t(n.observer,this.i,n.options,n))}}function e(t,n,...e){"function"!=typeof queueMicrotask?Promise.resolve().then((()=>t.apply(n,e))):queueMicrotask((()=>t.apply(n,e)))}class r{constructor(){this.l=new Set,this.h=!1}appendRecord(t,n){t.m.push(n),this.l.add(t)}queueMutationObserverMicrotask(){this.h||(this.h=!0,e((()=>{this.p()}),this))}p(){this.h=!1;const t=Array.from(this.l);this.l.clear(),t.forEach((t=>{e((t=>{const n=t.takeRecords();var e;(e=t).t.forEach((t=>{t.node.o.removeTransientRegisteredObserver(t)})),e.t.length=0,n.length>0&&t.v(n,t)}),this,t)}))}}class o{constructor(t){this.N=t}deref(){return this.N}}const i=new class{constructor(){this.l=new r,this.S=[],this.T=new WeakSet}forEachRange(t){let n=this.S.length;for(let e=n-1;e>=0;--e){const r=this.S[e].deref(),o=null==r,i=!o&&!this.T.has(r);o||i?(this.S[e]=this.S[n-1],this.S.pop(),n-=1):t(r)}}addRange(t){const n=(e=t,"function"==typeof WeakRef?new WeakRef(e):new o(e));var e;this.S.push(n),this.T.add(t)}removeRange(t){this.T.delete(t)}};function s(t){return i}function u(t,...n){return n.some((n=>t.nodeType===n))}function l(t){return 2===t.nodeType}function c(t){return 3===t.nodeType||4===t.nodeType||8===t.nodeType||7===t.nodeType}function a(t){return 3===t.nodeType||4===t.nodeType}function h(t){return 1===t.nodeType}function f(t){return 10===t.nodeType}function d(t){switch(t.nodeType){case 3:case 7:case 8:return t.data.length;default:return t.childNodes.length}}function m(t){let n=t,e=[];for(;n;)e.unshift(n),n=n.parentNode;return e}function p(t){return u(t,9)?t:t.ownerDocument}function g(t){return t.parentNode.childNodes.indexOf(t)}function w(t){for(;t.parentNode;)t=t.parentNode;return t}function y(t,n){n(t);for(let e=t.firstChild;e;e=e.nextSibling)y(e,n)}function b(t,n){const e=[];return y(n,(r=>{if(r===n||1!==r.nodeType)return;const o=r;"*"!==t&&o.nodeName!==t||e.push(o)})),e}function v(t,n,e){""===t&&(t=null);const r=[];return y(e,(o=>{if(o===e||1!==o.nodeType)return;const i=o;"*"!==t&&i.namespaceURI!==t||"*"!==n&&i.localName!==n||r.push(i)})),r}function x(t,n,e){e||(e=p(t));let r=t.C(e);if(n)for(let n=t.firstChild;n;n=n.nextSibling)r.appendChild(x(n,!0,e));return r}function N(t,n){if(t.length<n)throw new TypeError(`Function should be called with at least ${n} arguments`)}const S={IndexSizeError:1,HierarchyRequestError:3,WrongDocumentError:4,InvalidCharacterError:5,NotFoundError:8,NotSupportedError:9,InUseAttributeError:10,InvalidStateError:11,NamespaceError:14,InvalidNodeTypeError:24};class E extends Error{constructor(t="",n="Error"){super(t),this.message=t,this.name=n,this.code=S[n]||0,this.stack=new Error(t).stack}}function T(t,n){return new E(`${t}: ${n}`,t)}function C(t){throw T("HierarchyRequestError",t)}function D(t){throw T("IndexSizeError",t)}function $(t){throw T("InvalidCharacterError",t)}function A(t){throw T("InvalidNodeTypeError",t)}function I(t){throw T("InvalidStateError",t)}function k(t){throw T("NamespaceError",t)}function M(t){throw T("NotFoundError",t)}function R(t){throw T("NotSupportedError",t)}function P(t){throw T("WrongDocumentError",t)}class L{constructor(t,n){this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null,this.type=t,this.target=n}}function z(t,n,e){const r=[],o=[];for(let i=n;i;i=i.parentNode)i.o.collectInterestedObservers(t,n,e,r,o);const i=s();r.forEach(((r,s)=>{const u=o[s],l=new L(t,n);void 0!==e.name&&void 0!==e.namespace&&(l.attributeName=e.name,l.attributeNamespace=e.namespace),void 0!==u&&(l.oldValue=u),void 0!==e.addedNodes&&(l.addedNodes=e.addedNodes),void 0!==e.removedNodes&&(l.removedNodes=e.removedNodes),void 0!==e.previousSibling&&(l.previousSibling=e.previousSibling),void 0!==e.nextSibling&&(l.nextSibling=e.nextSibling),i.l.appendRecord(r,l)})),i.l.queueMutationObserverMicrotask()}function O(t){const n=[];for(let e=t.firstElementChild;e;e=e.nextElementSibling)n.push(e);return n}function V(t){for(let n=t.previousSibling;n;n=n.previousSibling)if(h(n))return n;return null}function F(t){for(let n=t.nextSibling;n;n=n.nextSibling)if(h(n))return n;return null}function U(t,n){const e=t.previousSibling,r=t.nextSibling,o=u(t,1),i=o?t.previousElementSibling:null,s=o?t.nextElementSibling:null;if(t.parentNode=null,t.previousSibling=null,t.nextSibling=null,e?e.nextSibling=r:n.firstChild=r,r?r.previousSibling=e:n.lastChild=e,n.childNodes.splice(n.childNodes.indexOf(t),1),o){const e=function(t){return u(t,1,9,11)?t:null}(n);e&&(e.firstElementChild===t&&(e.firstElementChild=s),e.lastElementChild===t&&(e.lastElementChild=i),e.childElementCount-=1)}if(u(n,9)){const e=n;u(t,1)?e.documentElement=null:u(t,10)&&(e.doctype=null)}}function _(t,n,e){if(u(n,9,11,1)||C("parent must be a Document, DocumentFragment or Element node"),t.contains(n)&&C("node must not be an inclusive ancestor of parent"),e&&e.parentNode!==n&&M("child is not a child of parent"),u(t,11,10,1,3,4,7,8)||C("node must be a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction or Comment node"),u(t,3)&&u(n,9)&&C("can not insert a Text node under a Document"),u(t,10)&&!u(n,9)&&C("can only insert a DocumentType node under a Document"),u(n,9)){const r=n;switch(t.nodeType){case 11:const n=t;n.firstElementChild!==n.lastElementChild&&C("can not insert more than one element under a Document"),Array.from(n.childNodes).some((t=>u(t,3)))&&C("can not insert a Text node under a Document"),n.firstElementChild&&(r.documentElement||e&&u(e,10)||e&&r.doctype&&g(e)<g(r.doctype))&&C("Document should contain at most one doctype, followed by at most one element");break;case 1:(r.documentElement||e&&u(e,10)||e&&r.doctype&&g(e)<g(r.doctype))&&C("Document should contain at most one doctype, followed by at most one element");break;case 10:(r.doctype||e&&r.documentElement&&g(r.documentElement)<g(e)||!e&&r.documentElement)&&C("Document should contain at most one doctype, followed by at most one element")}}}function q(t,n,e){_(t,n,e);let r=e;return r===t&&(r=t.nextSibling),j(t,p(n)),B(t,n,r),t}function B(t,n,e,r=!1){const o=function(t){return 11===t.nodeType}(t),i=o?Array.from(t.childNodes):[t],u=i.length;if(0===u)return;if(o&&(i.forEach((t=>H(t,!0))),z("childList",t,{removedNodes:i})),null!==e){const t=g(e);s().forEachRange((e=>{e.startContainer===n&&e.startOffset>t&&(e.startOffset+=u),e.endContainer===n&&e.endOffset>t&&(e.endOffset+=u)}))}let l=null===e?n.lastChild:e.previousSibling;i.forEach((t=>{!function(t,n,e){t.parentNode=n;const r=null===e?n.lastChild:e.previousSibling,o=null===e?null:e;if(t.previousSibling=r,t.nextSibling=o,r?r.nextSibling=t:n.firstChild=t,o?(o.previousSibling=t,n.childNodes.splice(n.childNodes.indexOf(o),0,t)):(n.lastChild=t,n.childNodes.push(t)),h(t)){const e=n;let i=null;for(let t=r;t;t=t.previousSibling){if(h(t)){i=t;break}const n=t;if(!f(n)){i=n.previousElementSibling;break}}let s=null;for(let t=o;t;t=t.nextSibling){if(h(t)){s=t;break}s=t.nextElementSibling;break}i||(e.firstElementChild=t),s||(e.lastElementChild=t),e.childElementCount+=1}(function(t){return 9===t.nodeType})(n)&&(h(t)?n.documentElement=t:f(t)&&(n.doctype=t))}(t,n,e)})),r||z("childList",n,{addedNodes:i,nextSibling:e,previousSibling:l})}function W(t,n){return q(t,n,null)}function X(t,n,e){if(u(e,9,11,1)||C("Can not replace under a non-parent node"),n.contains(e)&&C("Can not insert a node under its own descendant"),t.parentNode!==e&&M("child is not a child of parent"),u(n,11,10,1,3,4,7,8)||C("Can not insert a node that isn't a DocumentFragment, DocumentType, Element, Text, ProcessingInstruction or Comment"),u(n,3)&&u(e,9)&&C("can not insert a Text node under a Document"),u(n,10)&&!u(e,9)&&C("can only insert a DocumentType node under a Document"),u(e,9)){const r=e;switch(n.nodeType){case 11:const e=n;e.firstElementChild!==e.lastElementChild&&C("can not insert more than one element under a Document"),Array.from(e.childNodes).some((t=>u(t,3)))&&C("can not insert a Text node under a Document"),e.firstElementChild&&(r.documentElement&&r.documentElement!==t||t&&r.doctype&&g(t)<g(r.doctype))&&C("Document should contain at most one doctype, followed by at most one element");break;case 1:(r.documentElement&&r.documentElement!==t||r.doctype&&g(t)<g(r.doctype))&&C("Document should contain at most one doctype, followed by at most one element");break;case 10:(r.doctype&&r.doctype!==t||r.documentElement&&g(r.documentElement)<g(t))&&C("Document should contain at most one doctype, followed by at most one element")}}let r=t.nextSibling;r===n&&(r=n.nextSibling);const o=t.previousSibling;j(n,p(e));let i=[];null!==t.parentNode&&(i.push(t),H(t,!0));const s=u(n,11)?Array.from(n.childNodes):[n];return B(n,e,r,!0),z("childList",e,{addedNodes:s,removedNodes:i,nextSibling:r,previousSibling:o}),t}function Y(t,n){null!==t&&j(t,p(n));const e=Array.from(n.childNodes);let r=[];null!==t&&(u(t,11)?t.childNodes.forEach((t=>{r.push(t)})):r.push(t)),e.forEach((t=>{H(t,!0)})),null!==t&&B(t,n,null,!0),(r.length>0||e.length>0)&&z("childList",n,{addedNodes:r,removedNodes:e})}function H(t,n=!1){const e=t.parentNode,r=g(t);s().forEachRange((n=>{t.contains(n.startContainer)&&(n.startContainer=e,n.startOffset=r),t.contains(n.endContainer)&&(n.endContainer=e,n.endOffset=r),n.startContainer===e&&n.startOffset>r&&(n.startOffset-=1),n.endContainer===e&&n.endOffset>r&&(n.endOffset-=1)}));const o=t.previousSibling,i=t.nextSibling;U(t,e);for(let n=e;n;n=n.parentNode)n.o.appendTransientRegisteredObservers(t);n||z("childList",e,{removedNodes:[t],nextSibling:i,previousSibling:o})}function j(t,n){const e=p(t);t.parentNode&&H(t),n!==e&&y(t,(t=>{if(t.ownerDocument=n,u(t,1))for(const e of t.attributes)e.ownerDocument=n}))}function Q(t){const n=[];return y(t,(t=>{u(t,3,4)&&n.push(t.data)})),n.join("")}function K(t,n){let e=null;if(""!==n){e=new(s().Text)(n)}Y(e,t)}function G(t,n){const e=t.map((t=>t instanceof Node?t:n.createTextNode(String(t))));if(1===e.length)return e[0];{const t=n.createDocumentFragment();return e.forEach((n=>{t.appendChild(n)})),t}}function J(t,n){q(G(n,p(t)),t,t.firstChild)}function Z(t,n){W(G(n,p(t)),t)}function tt(t,n){const e=G(n,p(t));_(e,t,null),Y(e,t)}function nt(t,n){const e=t.parentNode;if(null===e)return;let r=t.previousSibling;for(;null!==r&&n.indexOf(r)>=0;)r=r.previousSibling;q(G(n,p(t)),e,null===r?e.firstChild:r.nextSibling)}function et(t,n){const e=t.parentNode;if(null===e)return;let r=t.nextSibling;for(;null!==r&&n.indexOf(r)>=0;)r=r.nextSibling;q(G(n,p(t)),e,r)}function rt(t,n){const e=t.parentNode;if(null===e)return;let r=t.nextSibling;for(;null!==r&&n.indexOf(r)>=0;)r=r.nextSibling;const o=G(n,p(t));t.parentNode===e?X(t,o,e):q(o,e,r)}function ot(t){null!==t.parentNode&&H(t)}function it(t,n){const e=n.startContainer;u(e,7)&&C("Can not insert into a processing instruction"),u(e,8)&&C("Can not insert into a comment"),a(e)&&null===e.parentNode&&C("Can not insert into a text node without a parent");let r=null;r=a(e)?e:e.childNodes[n.startOffset]||null;const o=null===r?e:r.parentNode;_(t,o,r),a(e)&&(r=e.splitText(n.startOffset)),t===r&&(r=r.nextSibling),null!==t.parentNode&&H(t);let i=null===r?d(o):g(r);u(t,11)?i+=d(t):i+=1,q(t,o,r),n.collapsed&&n.setEnd(o,i)}function st(t){return t>>>0}function ut(t){return null===t?"":String(t)}function lt(t){return null==t?"":String(t)}function ct(t,n){return function(t,n){if(!(t instanceof n))throw new TypeError(`Value should be an instance of ${n.name}`)}(t,n),t}function at(t,n){return null==t?null:ct(t,n)}function ht(t){return void 0===t?null:t}const ft=new WeakMap;function dt(t){let n=ft.get(t);return void 0===n&&(n=Math.random(),ft.set(t,n)),n}class Node{constructor(){this.ownerDocument=null,this.parentNode=null,this.childNodes=[],this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.o=new n(this)}get parentElement(){return this.parentNode&&u(this.parentNode,1)?this.parentNode:null}hasChildNodes(){return!!this.childNodes.length}normalize(){let t=this.firstChild,n=0;for(p(this);t;){let e=t.nextSibling;if(!u(t,3)){t.normalize(),t=e;continue}const r=t;let o=r.length;if(0===o){H(t),--n,t=e;continue}let i="";const l=[];for(let t=r.nextSibling;t&&u(t,3);t=t.nextSibling)i+=t.data,l.push(t);i&&r.replaceData(o,0,i);const c=s();for(let t=0,e=l.length;t<e;++t){const e=l[t],i=n+t+1;c.forEachRange((t=>{t.startContainer===e&&(t.startOffset+=o,t.startContainer=r),t.endContainer===e&&(t.endOffset+=o,t.endContainer=r),t.startContainer===this&&t.startOffset===i&&(t.startContainer=r,t.startOffset=o),t.endContainer===this&&t.endOffset===i&&(t.endContainer=r,t.endOffset=o)})),o+=e.length}for(;l.length;)H(l.shift());t=t.nextSibling,++n}}cloneNode(t=!1){return x(this,t)}compareDocumentPosition(t){if(N(arguments,1),this===(t=ct(t,Node)))return 0;let n=t,e=this,r=null,o=null;if(l(n)&&(r=n,n=r.ownerElement),l(e)&&(o=e,e=o.ownerElement,null!==r&&null!==n&&e===n))for(const t of e.attributes){if(t===r)return Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|Node.DOCUMENT_POSITION_PRECEDING;if(t===o)return Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|Node.DOCUMENT_POSITION_FOLLOWING}if(null===n||null===e)return Node.DOCUMENT_POSITION_DISCONNECTED|Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|(dt(n||r)>dt(e||o)?Node.DOCUMENT_POSITION_FOLLOWING:Node.DOCUMENT_POSITION_PRECEDING);const i=m(n),s=m(e);if(i[0]!==s[0])return Node.DOCUMENT_POSITION_DISCONNECTED|Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|(dt(i[0])>dt(s[0])?Node.DOCUMENT_POSITION_FOLLOWING:Node.DOCUMENT_POSITION_PRECEDING);let u=0;for(;u<i.length&&u<s.length&&i[u]===s[u];)++u;const c=n!==e&&u===i.length,a=n!==e&&u===s.length;return c&&null===r||n===e&&null!==o?Node.DOCUMENT_POSITION_CONTAINS|Node.DOCUMENT_POSITION_PRECEDING:a&&null===o||n===e&&null!==r?Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING:c||g(i[u])<g(s[u])?Node.DOCUMENT_POSITION_PRECEDING:Node.DOCUMENT_POSITION_FOLLOWING}contains(t){for(N(arguments,1),t=at(t,Node);t&&t!=this;)t=t.parentNode;return t===this}isDefaultNamespace(t){N(arguments,1),""===(t=ht(t))&&(t=null);return this.lookupNamespaceURI(null)===t}insertBefore(t,n){return N(arguments,2),q(t=ct(t,Node),this,n=at(n,Node))}appendChild(t){return N(arguments,1),W(t=ct(t,Node),this)}replaceChild(t,n){return N(arguments,2),t=ct(t,Node),X(n=ct(n,Node),t,this)}removeChild(t){return N(arguments,1),function(t,n){return t.parentNode!==n&&M("child is not a child of parent"),H(t),t}(t=ct(t,Node),this)}}function mt(t,n,e,r){z("attributes",n,{name:t.localName,namespace:t.namespaceURI,oldValue:e})}function pt(t,n){mt(t,t.ownerElement,t.value),t.D=n}function gt(t,n,e=!1){e||mt(t,n,null,t.value),n.attributes.push(t),t.ownerElement=n}function wt(t){const n=t.ownerElement;mt(t,n,t.value),n.attributes.splice(n.attributes.indexOf(t),1),t.ownerElement=null}Node.ELEMENT_NODE=1,Node.ATTRIBUTE_NODE=2,Node.TEXT_NODE=3,Node.CDATA_SECTION_NODE=4,Node.ENTITY_REFERENCE_NODE=5,Node.ENTITY_NODE=6,Node.PROCESSING_INSTRUCTION_NODE=7,Node.COMMENT_NODE=8,Node.DOCUMENT_NODE=9,Node.DOCUMENT_TYPE_NODE=10,Node.DOCUMENT_FRAGMENT_NODE=11,Node.NOTATION_NODE=12,Node.DOCUMENT_POSITION_DISCONNECTED=1,Node.DOCUMENT_POSITION_PRECEDING=2,Node.DOCUMENT_POSITION_FOLLOWING=4,Node.DOCUMENT_POSITION_CONTAINS=8,Node.DOCUMENT_POSITION_CONTAINED_BY=16,Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,Node.prototype.ELEMENT_NODE=1,Node.prototype.ATTRIBUTE_NODE=2,Node.prototype.TEXT_NODE=3,Node.prototype.CDATA_SECTION_NODE=4,Node.prototype.ENTITY_REFERENCE_NODE=5,Node.prototype.ENTITY_NODE=6,Node.prototype.PROCESSING_INSTRUCTION_NODE=7,Node.prototype.COMMENT_NODE=8,Node.prototype.DOCUMENT_NODE=9,Node.prototype.DOCUMENT_TYPE_NODE=10,Node.prototype.DOCUMENT_FRAGMENT_NODE=11,Node.prototype.NOTATION_NODE=12;class Attr extends Node{get nodeType(){return 2}get nodeName(){return this.name}get nodeValue(){return this.D}set nodeValue(t){yt(this,t=lt(t))}get textContent(){return this.D}set textContent(t){yt(this,t=lt(t))}lookupPrefix(t){return N(arguments,1),null!==this.ownerElement?this.ownerElement.lookupPrefix(t):null}lookupNamespaceURI(t){return N(arguments,1),null===this.ownerElement?null:this.ownerElement.lookupNamespaceURI(t)}get value(){return this.D}set value(t){yt(this,t)}constructor(t,n,e,r,o){super(),this.namespaceURI=t,this.prefix=n,this.localName=e,this.name=null===n?e:`${n}:${e}`,this.D=r,this.ownerElement=o,this.ownerDocument=o?o.ownerDocument:s().document}C(t){const n=new(s().Attr)(this.namespaceURI,this.prefix,this.localName,this.value,null);return n.ownerDocument=t,n}}function yt(t,n){n=String(n);null===t.ownerElement?t.D=n:pt(t,n)}class CharacterData extends Node{get nodeValue(){return this.$}set nodeValue(t){t=lt(t),bt(this,0,this.length,t)}get textContent(){return this.$}set textContent(t){t=lt(t),bt(this,0,this.length,t)}lookupPrefix(t){N(arguments,1);const n=this.parentElement;return null!==n?n.lookupPrefix(t):null}lookupNamespaceURI(t){N(arguments,1);const n=this.parentElement;return null===n?null:n.lookupNamespaceURI(t)}before(...t){nt(this,t)}after(...t){et(this,t)}replaceWith(...t){rt(this,t)}remove(){ot(this)}get previousElementSibling(){return V(this)}get nextElementSibling(){return F(this)}get data(){return this.$}set data(t){t=ut(t),bt(this,0,this.length,t)}get length(){return this.data.length}constructor(t){super(),this.$=String(t)}substringData(t,n){return N(arguments,2),vt(this,t,n)}appendData(t){N(arguments,1),bt(this,this.length,0,t)}insertData(t,n){N(arguments,1),bt(this,t,0,n)}deleteData(t,n){N(arguments,2),bt(this,t,n,"")}replaceData(t,n,e){N(arguments,3),bt(this,t,n,e)}}function bt(t,n,e,r){n=st(n),e=st(e);const o=t.length;n>o&&D("can not replace data past the node's length"),n+e>o&&(e=o-n),z("characterData",t,{oldValue:t.data});const i=t.data,u=i.substring(0,n)+r+i.substring(n+e);t.$=u;s().forEachRange((o=>{o.startContainer===t&&o.startOffset>n&&o.startOffset<=n+e&&(o.startOffset=n),o.endContainer===t&&o.endOffset>n&&o.endOffset<=n+e&&(o.endOffset=n),o.startContainer===t&&o.startOffset>n+e&&(o.startOffset=o.startOffset+r.length-e),o.endContainer===t&&o.endOffset>n+e&&(o.endOffset=o.endOffset+r.length-e)}))}function vt(t,n,e){n=st(n),e=st(e);const r=t.length;return n>r&&D("can not substring data past the node's length"),n+e>r?t.data.substring(n):t.data.substring(n,n+e)}class Text extends CharacterData{get nodeType(){return 3}get nodeName(){return"#text"}constructor(t=""){super(t);const n=s();this.ownerDocument=n.document}splitText(t){return N(arguments,1),function(t,n){const e=t.length;n>e&&D("can not split past the node's length");const r=e-n,o=vt(t,n,r),i=new(s().Text)(o);i.ownerDocument=t.ownerDocument;const u=t.parentNode;if(null!==u){B(i,u,t.nextSibling);const e=g(t)+1;s().forEachRange((r=>{r.startContainer===t&&r.startOffset>n&&(r.startContainer=i,r.startOffset-=n),r.endContainer===t&&r.endOffset>n&&(r.endContainer=i,r.endOffset-=n),r.startContainer===u&&r.startOffset===e&&(r.startOffset+=1),r.endContainer===u&&r.endOffset===e&&(r.endOffset+=1)}))}return bt(t,n,r,""),i}(this,t=st(t))}C(t){const n=new(s().Text)(this.data);return n.ownerDocument=t,n}get wholeText(){const t=[this.data];let n=this.previousSibling;for(;null!==n&&u(n,3,4);){const e=n.data;t.unshift(e),n=n.previousSibling}let e=this.nextSibling;for(;null!==e&&u(e,3,4);){const n=e.data;t.push(n),e=e.nextSibling}return t.join("")}}class CDATASection extends Text{get nodeType(){return 4}get nodeName(){return"#cdata-section"}constructor(t){super(t)}C(t){const n=new(s().CDATASection)(this.data);return n.ownerDocument=t,n}}class xt extends CharacterData{get nodeType(){return 8}get nodeName(){return"#comment"}constructor(t=""){super(t);const n=s();this.ownerDocument=n.document}C(t){const n=new(s().Comment)(this.data);return n.ownerDocument=t,n}}class DocumentType extends Node{get nodeType(){return 10}get nodeName(){return this.name}get nodeValue(){return null}set nodeValue(t){}get textContent(){return null}set textContent(t){}lookupPrefix(t){return N(arguments,1),null}lookupNamespaceURI(t){return N(arguments,1),null}before(...t){nt(this,t)}after(...t){et(this,t)}replaceWith(...t){rt(this,t)}remove(){ot(this)}constructor(t,n="",e=""){super(),this.name=t,this.publicId=n,this.systemId=e}C(t){const n=new(s().DocumentType)(this.name,this.publicId,this.systemId);return n.ownerDocument=t,n}}function Nt(t,n,e,r,o){return new Attr(t,n,e,r,o)}function St(t,n,e,r=null){return go(t,n,e,r)}function Et(t,n){gt(t,n)}const Tt="http://www.w3.org/1999/xhtml",Ct="http://www.w3.org/XML/1998/namespace",Dt="http://www.w3.org/2000/xmlns/";function $t(t){(function(t){const n=t.split(":");return!(n.length>2)&&n.every((t=>Hr(t)))})(t)||$("The qualified name is not a valid QName")}function At(t,n){""===t&&(t=null),$t(n);let e=null,r=n;const o=n.indexOf(":");return o>=0&&(e=n.substring(0,o),r=n.substring(o+1)),null!==e&&null===t&&k("Qualified name with prefix can not have a null namespace"),"xml"===e&&t!==Ct&&k("xml prefix can only be used for the XML namespace"),"xmlns"!==n&&"xmlns"!==e||t===Dt||k("xmlns prefix or qualifiedName must use the XMLNS namespace"),t===Dt&&"xmlns"!==n&&"xmlns"!==e&&k("xmlns prefix or qualifiedName must be used for the XMLNS namespace"),{namespace:t,prefix:e,localName:r}}function It(t,n){if(t.namespaceURI===n&&null!==t.prefix)return t.prefix;const e=Array.from(t.attributes).find((t=>"xmlns"===t.prefix&&t.value===n));return e?e.localName:null!==t.parentElement?It(t.parentElement,n):null}function kt(t,n){return{success:!0,offset:t,value:n}}function Mt(t){return kt(t,void 0)}function Rt(t,n,e=!1){return{success:!1,offset:t,expected:n,fatal:e}}function Pt(t){return(n,e)=>{const r=e+t.length;return n.slice(e,r)===t?kt(r,t):Rt(e,[t])}}function Lt(t,n){return(e,r)=>{const o=e.codePointAt(r);return void 0!==o&&t(o)?Mt(r+function(t){return t>65535?2:1}(o)):Rt(r,n)}}function zt(t,n){return(e,r)=>{const o=r;for(;;){const n=e.codePointAt(r);if(void 0===n)break;if(!t(n))break;r+=n>65535?2:1}return void 0!==n&&r===o?Rt(r,n):Mt(r)}}function Ot(t,n,e){return Lt((e=>t<=e&&e<=n),e||[`${String.fromCodePoint(t)}-${String.fromCodePoint(n)}`])}function Vt(t,n){return(e,r)=>{const o=t(e,r);return o.success?kt(o.offset,n(o.value)):o}}function Ft(t){return Vt(t,(()=>{}))}function Ut(t,n,e,r){return(o,i)=>{const s=t(o,i);return s.success?n(s.value)?s:Rt(i,e,r):s}}function _t(t,n){return(e,r)=>{let o=null;for(const i of t){const t=i(e,r);if(t.success)return t;if(null===o||t.offset>o.offset?o=t:t.offset===o.offset&&void 0===n&&(o.expected=o.expected.concat(t.expected)),t.fatal)return t}return n=n||(null==o?void 0:o.expected)||[],o&&(o.expected=n),o||Rt(r,n)}}function qt(t){return(n,e)=>{const r=t(n,e);return r.success||r.fatal?r:kt(e,null)}}function Bt(t){return(n,e)=>{let r=[],o=e;for(;;){const e=t(n,o);if(!e.success){if(e.fatal)return e;break}if(r.push(e.value),e.offset===o)break;o=e.offset}return kt(o,r)}}function Wt(t){return(n,e)=>{let r=e;for(;;){const e=t(n,r);if(!e.success){if(e.fatal)return e;break}if(e.offset===r)break;r=e.offset}return Mt(r)}}function Xt(t,n,e){return(r,o)=>{const i=t(r,o);if(!i.success)return i;const s=n(r,i.offset);return s.success?kt(s.offset,e(i.value,s.value)):s}}function Yt(...t){return(n,e)=>{const r=[];for(const o of t){const t=o(n,e);if(!t.success)return t;e=t.offset,r.push(t.value)}return kt(e,r)}}function Ht(...t){return(n,e)=>{for(const r of t){const t=r(n,e);if(!t.success)return t;e=t.offset}return Mt(e)}}function jt(t,n){return t}function Qt(t,n){return n}function Kt(t){return Xt(t,Wt(t),Qt)}function Gt(t,n){return Xt(t,n,Qt)}function Jt(t,n){return Xt(t,n,jt)}function Zt(t,n,e,r=!1){return Gt(t,r?sn(Jt(n,e)):Jt(n,e))}function tn(t){return(n,e)=>{const r=t(n,e);return r.success?kt(r.offset,n.slice(e,r.offset)):r}}function nn(t){return(n,e)=>{const r=t(n,e);return r.success?kt(e,r.value):r}}function en(t,n){return(e,r)=>t(e,r).success?Rt(r,n):Mt(r)}function rn(t,n,e){return Gt(en(n,e),t)}function on(t,n,e=0,r=[]){return(o,i)=>{const s=o.codePointAt(i+e);if(void 0===s)return Rt(i,r);const u=t[s];return void 0===u?void 0===n?Rt(i,r):n(o,i):u(o,i)}}function sn(t){return(n,e)=>{const r=t(n,e);return r.success?r:Rt(r.offset,r.expected,!0)}}const un=(t,n)=>t.length===n?Mt(n):Rt(n,["end of input"]);function ln(t){return Xt(t,un,jt)}class cn{constructor(t,n){this.A=0,this.I=0,this.k=t,this.M=n}next(){if(this.A>=this.M.length)return{done:!0,value:un(this.k,this.I)};const{parser:t,type:n}=this.M[this.A],e=t(this.k,this.I);return e.success?(this.I=e.offset,1!==n&&(this.A+=1),void 0===e.value?this.next():{done:!1,value:e.value}):0===n||e.fatal?{done:!0,value:e}:(this.A+=1,this.next())}}function an(t){return(n,e)=>{const r=e,o=t(n,e);return o.success?kt(o.offset,Object.assign({input:n,start:r,end:o.offset},o.value)):o}}const hn=Pt("_"),fn=Pt("-"),dn=Pt("."),mn=Pt('"'),pn=Pt("'"),gn=Pt("<"),wn=Pt(">"),yn=Pt("&"),bn=Pt("="),vn=Pt("["),xn=Pt("]"),Nn=Pt(";"),Sn=Pt("%"),En=Pt("("),Tn=Pt(")"),Cn=Pt("+"),Dn=Pt(","),$n=Pt("?"),An=Pt("*"),In=Pt("|"),kn=Pt("]]>"),Mn=Pt("\x3c!--"),Rn=Pt("--\x3e"),Pn=Pt("<?"),Ln=Pt("?>"),zn=Pt("1."),On=Pt("version"),Vn=Pt("encoding"),Fn=Pt("standalone"),Un=Pt("yes"),_n=Pt("no"),qn=Pt("<?xml"),Bn=Pt("<!DOCTYPE"),Wn=Pt("SYSTEM"),Xn=Pt("PUBLIC"),Yn=Pt("</"),Hn=Pt("/>"),jn=Pt("&#"),Qn=Pt("&#x"),Kn=Pt("<!ELEMENT"),Gn=Pt("EMPTY"),Jn=Pt("ANY"),Zn=Pt("#PCDATA"),te=Pt("<!ATTLIST"),ne=Pt("NOTATION"),ee=Pt("#REQUIRED"),re=Pt("#IMPLIED"),oe=Pt("#FIXED"),ie=Pt("<!ENTITY"),se=Pt("NDATA"),ue=Pt("<!NOTATION"),le=65,ce=90,ae=Ot(le,ce),he=97,fe=122,de=Ot(he,fe),me=Ot(48,57),pe=_t([me,Ot(65,70),Ot(97,102)],["hexadecimal digit"]);function ge(t){return 9===t||10===t||13===t||32<=t&&t<=55295||57344<=t&&t<=65533||65536<=t&&t<=1114111}const we=ln(zt(ge));function ye(t){return 32===t||9===t||13===t||10===t}const be=zt(ye,["whitespace"]),ve=ln(zt(ye)),xe=58,Ne=95;function Se(t){return t===xe||le<=t&&t<=ce||t===Ne||he<=t&&t<=fe||192<=t&&t<=214||216<=t&&t<=246||248<=t&&t<=767||880<=t&&t<=893||895<=t&&t<=8191||8204<=t&&t<=8205||8304<=t&&t<=8591||11264<=t&&t<=12271||12289<=t&&t<=55295||63744<=t&&t<=64975||65008<=t&&t<=65533||65536<=t&&t<=983039}const Ee=Lt(Se,["valid name start character"]);function Te(t){return Se(t)||45===t||46===t||48<=t&&t<=57||183===t||768<=t&&t<=879||8255<=t&&t<=8256}const Ce=tn(Gt(Ee,zt(Te))),De=ln(Ce),$e=Ut(Ce,(t=>!t.includes(":")),["name must not contain colon"],!0),Ae=tn(zt(Te,["valid name character"])),Ie=an(Vt(Ut(_t([Vt(Zt(Qn,tn(Kt(pe)),Nn,!0),(t=>parseInt(t,16))),Vt(Zt(jn,tn(Kt(me)),Nn,!0),(t=>parseInt(t,10)))]),(t=>ge(t)),["character reference must reference a valid character"],!0),(t=>({type:0,cp:t})))),ke=_t([an(Vt(Zt(yn,$e,sn(Nn)),(t=>({type:1,name:t})))),Ie]),Me=an(Vt(Zt(Sn,$e,Nn),(t=>({type:2,name:t})))),Re=38,Pe=_t([Zt(mn,Bt(_t([tn(zt((t=>37!==t&&t!==Re&&t!==Le&&ge(t)),[])),Me,ke])),mn,!0),Zt(pn,Bt(_t([tn(zt((t=>37!==t&&t!==Re&&t!==ze&&ge(t)),[])),Me,ke])),pn,!0)]),Le=34,ze=39,Oe=on({[Le]:Zt(mn,Bt(on({[Re]:ke},tn(zt((t=>t!==Be&&t!==Re&&t!==Le&&ge(t)),[])))),mn,!0),[ze]:Zt(pn,Bt(on({[Re]:ke},tn(zt((t=>t!==Be&&t!==Re&&t!==ze&&ge(t)),[])))),pn,!0)},void 0,0,["quoted attribute value"]),Ve=ln(Bt(_t([tn(zt((t=>t!==Be&&t!==Re&&ge(t)),[])),ke]))),Fe=Ut(_t([Zt(mn,tn(zt((t=>t!==Le&&ge(t)))),mn),Zt(pn,tn(zt((t=>t!==ze&&ge(t)))),pn)]),(t=>!t.includes("#")),["system identifier must not contain a fragment identifier"],!0);function Ue(t){return 32===t||13===t||10===t||he<=t&&t<=fe||le<=t&&t<=ce||48<=t&&t<=57||33<=t&&t<=47&&34!==t&&38!==t||58<=t&&t<=64&&60!==t&&62!==t||95===t}const _e=ln(zt(Ue)),qe=_t([Zt(mn,tn(zt((t=>t!==Le&&Ue(t)))),mn,!0),Zt(pn,tn(zt((t=>t!==ze&&Ue(t)))),pn,!0)]),Be=60,We=tn(Kt(_t([zt((t=>t!==Be&&t!==Re&&93!==t&&ge(t)),[]),rn(Ft(xn),kn,[])],["character data"]))),Comment=Vt(Zt(Mn,tn(Wt(_t([zt((t=>45!==t&&ge(t)),[]),Jt(Ft(fn),en(fn,["comment content may not contain --"]))]))),Rn,!0),(t=>({type:3,data:t}))),Xe=Ut($e,(t=>"xml"!==t.toLowerCase()),['processing instruction target must not be "xml"'],!0),Ye=Zt(Pn,Xt(Xe,qt(Gt(be,tn(Wt(_t([zt((t=>63!==t&&ge(t)),[]),Jt(Ft($n),en(wn,["PI data"]))]))))),((t,n)=>({type:4,target:t,data:n}))),Ln,!0),He=Pt("<![CDATA["),je=tn(Wt(_t([zt((t=>93!==t&&ge(t)),[]),rn(Ft(xn),kn,["CData"])]))),Qe=an(Vt(Zt(He,je,kn,!0),(t=>({type:5,data:t})))),Ke=Zt(qt(be),bn,qt(be)),Ge=tn(Gt(zn,Kt(me))),Je=Gt(be,Gt(On,Gt(Ke,_t([Zt(mn,Ge,mn,!0),Zt(pn,Ge,pn,!0)])))),Ze=tn(Gt(_t([ae,de]),Wt(_t([ae,de,me,Ft(dn),Ft(hn),Ft(fn)])))),tr=Gt(be,Gt(Vn,Gt(Ke,_t([Zt(mn,Ze,mn,!0),Zt(pn,Ze,pn,!0)])))),nr=_t([Vt(Un,(()=>!0)),Vt(_n,(()=>!1))]),er=Gt(be,Gt(Fn,sn(Gt(Ke,_t([Zt(mn,nr,mn,!0),Zt(pn,nr,pn,!0)]))))),rr=Zt(Jt(qn,nn(be)),Jt(Xt(Je,Xt(qt(tr),qt(er),((t,n)=>[t,n])),((t,[n,e])=>({type:6,version:t,encoding:n,standalone:e}))),qt(be)),Ln,!0),or=an(Vt(Ce,(t=>({name:t})))),ir=Xt(or,Gt(sn(Ke),sn(Oe)),((t,n)=>({name:t,value:n}))),sr=Vt(Yt(gn,or,sn(Jt(Bt(Gt(be,ir)),qt(be))),sn(on({47:Vt(Hn,(()=>!0))},Vt(wn,(()=>!1)),0,[">","/>"]))),(([t,n,e,r])=>({type:r?9:7,name:n,attributes:e}))),ur=an(Vt(Zt(Yn,Jt(Ce,qt(be)),wn,!0),(t=>({type:8,name:t})))),lr=_t([$n,An,Cn]),cr=Jt(_t([Ft(Ce),function(t,n){return ar(t,n)},function(t,n){return hr(t,n)}]),Ft(qt(lr))),ar=Ht(En,qt(be),cr,Kt(Yt(qt(be),In,qt(be),sn(cr))),qt(be),Tn);const hr=Ht(En,qt(be),cr,Wt(Yt(qt(be),Dn,qt(be),sn(cr))),qt(be),Tn);const fr=Jt(_t([ar,hr]),qt(lr)),dr=Ht(En,qt(be),Zn,_t([Ht(Wt(Ht(qt(be),In,qt(be),Ce)),qt(be),Tn,An),Ft(Jt(qt(be),Tn))])),mr=Jt(Kn,sn(Ht(be,Ce,be,_t([Ft(Gn),Ft(Jn),Ft(dr),Ft(fr)]),qt(be),wn))),pr=Pt("CDATA"),gr=_t([Pt("IDREFS"),Pt("IDREF"),Pt("ID"),Pt("ENTITY"),Pt("ENTITIES"),Pt("NMTOKENS"),Pt("NMTOKEN")]),wr=_t([Jt(ne,sn(Ht(be,En,qt(be),$e,Wt(Ht(qt(be),In,qt(be),$e)),qt(be),Tn))),Jt(En,sn(Ht(qt(be),Ae,Wt(Ht(qt(be),In,qt(be),Ae)),qt(be),Tn)))]),yr=_t([Vt(pr,(()=>!0)),Vt(gr,(()=>!1)),Vt(wr,(()=>!1))]),br=_t([Vt(ee,(()=>({type:0}))),Vt(re,(()=>({type:1}))),Xt(Vt(qt(Jt(oe,be)),(t=>null!==t)),Oe,((t,n)=>({type:2,fixed:t,value:n})))]),vr=Xt(Gt(be,or),sn(Xt(Gt(be,yr),Gt(be,br),((t,n)=>({isCData:t,def:n})))),((t,{isCData:n,def:e})=>({name:t,isCData:n,def:e}))),xr=Zt(Jt(te,be),Xt(Ce,sn(Bt(vr)),((t,n)=>({type:0,name:t,attdefs:n}))),Gt(qt(be),wn),!0),Nr=_t([Vt(Gt(Wn,sn(Gt(be,Fe))),(t=>({publicId:null,systemId:t}))),Gt(Xn,Xt(sn(Gt(be,qe)),Gt(be,Fe),((t,n)=>({publicId:t,systemId:n}))))]),Sr=_t([Pe,Xt(Nr,qt(Gt(Zt(be,se,be),$e)),((t,n)=>({ids:t,ndata:n})))]),Er=Zt(ie,Xt(Gt(be,$e),sn(Gt(be,Sr)),((t,n)=>({type:1,name:t,value:n}))),Gt(qt(be),wn)),Tr=_t([Pe,Ft(Nr)]),Cr=Zt(Jt(ie,Gt(be,Sn)),Xt(Gt(be,$e),sn(Gt(be,Tr)),((t,n)=>n?{type:2,name:t,value:n}:void 0)),Gt(qt(be),wn),!0),Dr=Gt(nn(ie),sn(_t([Er,Cr]))),$r=Zt(Jt(qn,nn(be)),Jt(Xt(qt(Je),tr,((t,n)=>({type:6,version:t,encoding:n,standalone:null}))),qt(be)),Ln,!0),Ar=Vt(Jt(Jt(Xn,be),sn(qe)),(t=>({publicId:t,systemId:null}))),Ir=Zt(ue,Xt(Zt(be,$e,be),_t([Ft(Nr),Ft(Ar)]),(()=>{})),Gt(qt(be),wn),!0),kr=_t([Ft(mr),xr,Dr,Ft(Ir),Ft(Ye),Ft(Comment)]),Mr=_t([Ft(Me),Ft(be)]),Rr=function(t){return Vt(t,(t=>t.filter((t=>void 0!==t))))}(Bt(_t([kr,Mr]))),Pr=Gt(Bn,sn(Vt(Yt(be,Ce,qt(Gt(be,Nr)),qt(be),qt(Jt(Zt(vn,Rr,xn,!0),qt(be))),wn),(([t,n,e,r,o,i])=>({type:10,name:n,ids:e,intSubset:o}))))),Lr={parser:on({[Be]:on({47:ur,33:_t([Comment,Qe]),63:Ye},sr,1),[Re]:ke},We),type:1};function zr(t){return new cn(t,[Lr])}const Or=_t([Comment,Ye,be]),Vr=[...[{parser:rr,type:2},{parser:Or,type:1},{parser:Pr,type:2},{parser:Or,type:1}],...[{parser:sr,type:0},Lr]];function Fr(t){return new cn(t,Vr)}const Ur=[{parser:$r,type:2},Lr];function _r(t){return new cn(t,Ur)}function qr(t){return Array.from(t,(t=>Yr(t)?t:"[invalid character]")).join("")}function Br(t,n,e){const r=Array.from(t);if(r.length<e)return t;switch(n){case 0:return"…"+r.slice(-e).join("");case 1:return r.slice(0,e).join("")+"…"}const o=0|Math.min(r.length/2,e/2);return r.slice(0,o).join("")+"…"+r.slice(-o).join("")}function Wr(t,n){const{line:e,char:r}=function(t,n){let e=1,r=1,o=0;for(;o<n;){const n=t.codePointAt(o);r++,o+=n>65535?2:1,10===n&&(e++,r=1)}return{line:e,char:r}}(n.input,n.start);throw new Error(`${t}\n${`At line ${e}, character ${r}:`}\n\n${function(t,n,e){const r=Br(qr(t.substring(n,e)),2,30),o=t.lastIndexOf("\n",n),i=Br(qr(t.substring(o+1,n)),0,55-r.length),s=t.indexOf("\n",e),u=Br(qr(s>0?t.substring(e,s):t.substring(e)),1,80-r.length-i.length),l=Array.from(i,(t=>jr(t)?t:" ")).join("");return`${i}${r}${u}\n${l}${"^".repeat(Math.max(Array.from(r).length,1))}`}(n.input,n.start,n.end)}`)}function Xr(t,n,e,r){const o=Array.from(new Set(e),(t=>t.includes('"')?`'${t}'`:`"${t}"`)),i=n.codePointAt(r),s=i?String.fromCodePoint(i):"";Wr(`Parsing ${t} failed, expected ${o.length>1?"one of "+o.join(", "):o[0]}`,{input:n,start:r,end:r+Math.max(s.length,1)})}function Yr(t){return we(t,0).success}function Hr(t){return De(t,0).success}function jr(t){return ve(t,0).success}function Qr(t){const n=[];for(const e of t)if("string"!=typeof e)switch(e.type){case 0:n.push(String.fromCodePoint(e.cp));break;case 1:n.push(`&${e.name};`);break;case 2:Wr(`reference to parameter entity "${e.name}" must not occur in an entity declaration in the internal subset`,e)}else n.push(e);return n.join("")}class Kr{constructor(t){if(this.R=new Map,this.P=new Map,this.L=new Set,this.O=new Set,t.intSubset)for(const n of t.intSubset)switch(n.type){case 0:{for(const t of n.attdefs)if(2===t.def.type)for(const n of t.def.value)"string"!=typeof n&&1===n.type&&(this.P.has(n.name)||this.L.has(n.name)||this.O.has(n.name)||Wr(`default value of attribute "${t.name.name}" contains reference to undefined entity "${n.name}"`,n),this.L.has(n.name)&&Wr(`default value of attribute "${t.name.name}" must not contain reference to external entity "${n.name}"`,n));let t=this.R.get(n.name);void 0===t&&(t=new Map,this.R.set(n.name,t));for(const e of n.attdefs)t.has(e.name.name)||t.set(e.name.name,e);break}case 2:if(Array.isArray(n.value))for(const t of n.value)"string"!=typeof t&&2===t.type&&Wr(`reference to parameter entity "${t.name}" must not occur in an entity declaration in the internal subset`,t);break;case 1:if(this.P.has(n.name)||this.L.has(n.name))continue;Array.isArray(n.value)?this.P.set(n.name,Qr(n.value)):null===n.value.ndata?this.L.add(n.name):this.O.add(n.name)}}getAttlist(t){return this.R.get(t.name)}getEntityReplacementText(t,n){const e=this.P.get(t.name);if(void 0===e&&(this.O.has(t.name)&&Wr(`reference to binary entity "${t.name}" is not allowed`,t),this.L.has(t.name))){if(n)return"";Wr(`reference to external entity "${t.name}" is not allowed in attribute value`,t)}return e}}const Gr=new Map([["lt","&#60;"],["gt",">"],["amp","&#38;"],["apos","'"],["quot",'"']]);function Jr(t,n,e,r){for(const o of n){if("string"==typeof o){t.push(o.replace(/[\r\n\t]/g," "));continue}if(0===o.type){t.push(String.fromCodePoint(o.cp));continue}null!==r&&r.includes(o.name)&&Wr(`reference to entity "${o.name}" must not be recursive`,o);let n=Gr.get(o.name);void 0===n&&null!==e&&(n=e.getEntityReplacementText(o,!1)),void 0===n&&Wr(`reference to unknown entity "${o.name}" in attribute value`,o);const i=Ve(n,0);i.success||Xr(`replacement text for entity "${o.name}"`,n,i.expected,i.offset),Jr(t,i.value,e,r?[o.name,...r]:[o.name])}}function Zr(t,n,e){const r=[];return Jr(r,t,e,null),n&&!n.isCData?r.join("").replace(/[ ]+/g," ").replace(/^[ ]+|[ ]+$/g,""):r.join("")}function to(t,n){const e=t.name,r=n.get(e);if(void 0!==r)return r;let o=null,i=e;const s=e.indexOf(":");s>=0&&(o=e.substring(0,s),i=e.substring(s+1)),(""===o||""===i||i.includes(":"))&&Wr(`the name "${e}" is not a valid qualified name`,t);const u={prefix:o,localName:i};return n.set(e,u),u}class no{constructor(t,n=null){var e;this.V=new Map,this.F=null,this.U=t,this.F=null!==(e=null!=n?n:null==t?void 0:t.F)&&void 0!==e?e:null}getForElement(t,n){"xmlns"===t&&Wr('element names must not have the prefix "xmlns"',n);for(let n=this;null!==n;n=n.U){const e=n.V.get(t);if(void 0!==e)return e}if(null!==t&&this.F){const n=this.F(t);if(void 0!==n)return n}Wr(`use of undeclared element prefix "${t}"`,n)}getForAttribute(t,n,e){if(null===t)return"xmlns"===n?Dt:null;for(let n=this;null!==n;n=n.U){const e=n.V.get(t);if(void 0!==e)return e}if(this.F){const n=this.F(t);if(void 0!==n)return n}Wr(`use of undeclared attribute prefix ${t}`,e)}static fromAttrs(t,n,e,r,o){let i=t,s=!1;const u=(n,e,r)=>{null!==n||e!==Ct&&e!==Dt||Wr(`the namespace "${e}" must not be used as the default namespace`,r),e===Dt&&Wr(`the namespace "${Dt}" must not be bound to a prefix`,r),e===Ct&&"xml"!==n&&Wr(`the namespace "${Ct}" must be bound only to the prefix "xml"`,r),e!==Ct&&"xml"===n&&Wr(`the xml namespace prefix must not be bound to any namespace other than "${Ct}"`,r),null!==n&&null===e&&Wr(`the prefix "${n}" must not be undeclared`,r),s||(i=new no(t),s=!0),i.V.set(n,e)},l=(t,n)=>{const{prefix:l,localName:c}=to(t,o),a=null==e?void 0:e.get(t.name);if(null!==l||"xmlns"!==c||s&&i.V.has(null)){if(!("xmlns"!==l||s&&i.V.has(c))){"xmlns"===c&&Wr('the "xmlns" namespace prefix must not be declared',t);const e=Zr(n,a,r)||null;u(c,e,t)}}else{const e=Zr(n,a,r)||null;u(null,e,t)}};for(const t of n.attributes)l(t.name,t.value);if(e)for(const t of e.values()){const n=t.def;2===n.type&&l(t.name,n.value)}return i}static default(t){const n=new no(null,t);return n.V.set(null,null),n.V.set("xml",Ct),n.V.set("xmlns",Dt),n}}const eo=no.default(null);function ro(t,n){B(n,t,null,!0)}const oo=100,io=4194304;function so(t,n,e,r,{entityExpansionMaxAmplification:o=oo,entityExpansionThreshold:i=io,treatCDataAsText:s=!1}){var u,l;const c=p(r);let a={parent:null,root:r,namespaces:e,entityRoot:!0},f=null;const d=new Map;let m=[];function g(){if(m.length>0){const t=m.join("");if(a.root===c){if(!jr(t))throw new Error("document must not contain text outside of elements")}else ro(a.root,c.createTextNode(m.join("")));m.length=0}}const w=(t=function(t){return t.replace(/\r\n?/g,"\n")}(t=t.replace(/^\ufeff/,""))).length;let y=w,b=null,v={parent:null,entity:null,iterator:n(t)};for(;v;){let n=v.iterator.next();for(;!n.done;n=v.iterator.next()){const t=n.value;if("string"!=typeof t){switch(t.type){case 0:a.root===c&&null!==c.documentElement&&Wr("character reference must not appear after the document element",t),m.push(String.fromCodePoint(t.cp));continue;case 1:{a.root===c&&null!==c.documentElement&&Wr(`reference to entity "${t.name}" must not appear after the document element`,t);for(let n=v;n;n=n.parent)n.entity===t.name&&Wr(`reference to entity "${t.name}" must not be recursive`,t);let n=Gr.get(t.name);if(void 0===n&&null!==f&&(n=f.getEntityReplacementText(t,!0)),void 0===n&&Wr(`reference to unknown entity "${t.name}" in content`,t),null===b&&(b=t),y+=n.length,y>i){y/w>o&&Wr("too much entity expansion",b)}a={parent:a,root:a.root,namespaces:a.namespaces,entityRoot:!0},v={parent:v,entity:t.name,iterator:zr(n)};continue}case 5:if(s){m.push(t.data);continue}}switch(g(),t.type){case 5:a.root===c&&null!==c.documentElement&&Wr("CData section must not appear after the document element",t),ro(a.root,c.createCDATASection(t.data));continue;case 3:ro(a.root,c.createComment(t.data));continue;case 10:f=new Kr(t),ro(a.root,c.implementation.createDocumentType(t.name,(null===(u=t.ids)||void 0===u?void 0:u.publicId)||"",(null===(l=t.ids)||void 0===l?void 0:l.systemId)||""));continue;case 4:ro(a.root,c.createProcessingInstruction(t.target,t.data||""));continue;case 7:case 9:{a.root===c&&null!==c.documentElement&&Wr(`document must contain a single root element, but found "${c.documentElement.nodeName}" and "${t.name.name}"`,t.name);const n=f?f.getAttlist(t.name):void 0,e=no.fromAttrs(a.namespaces,t,n,f,d),{prefix:r,localName:o}=to(t.name,d),i=e.getForElement(r,t.name),s=St(c,o,i,r);for(const r of t.attributes){const{prefix:o,localName:i}=to(r.name,d),u=e.getForAttribute(o,i,r.name),l=null==n?void 0:n.get(r.name.name);s.hasAttributeNS(u,i)&&Wr(`attribute "${r.name.name}" must not appear multiple times on element "${t.name.name}"`,r.name);gt(Nt(u,o,i,Zr(r.value,l,f),s),s,!0)}if(n)for(const t of n.values()){const n=t.def;if(2!==n.type)continue;const{prefix:r,localName:o}=to(t.name,d),i=e.getForAttribute(r,o,t.name);if(s.hasAttributeNS(i,o))continue;gt(Nt(i,r,o,Zr(n.value,t,f),s),s,!0)}ro(a.root,s),7===t.type&&(a={parent:a,root:s,namespaces:e,entityRoot:!1});continue}case 8:h(a.root)&&a.root.nodeName===t.name||Wr(`non-well-formed element: found end tag "${t.name}" but expected ${h(a.root)?`"${a.root.nodeName}"`:"no such tag"}`,t),a=a.parent;continue}}else m.push(t)}if(n.value.success||Xr(v.entity?`replacement text for entity ${v.entity}`:r===c?"document":"fragment",t,n.value.expected,n.value.offset),!a.entityRoot)throw new Error(`${v.entity?`replacement text for entity "${v.entity}"`:r===c?"document":"fragment"} is not well-formed - element "${a.root.nodeName}" is missing a closing tag`);v=v.parent,v&&(a=a.parent,null===v.entity&&(b=null))}g()}function uo(t,n={}){const e=(new Document).createDocumentFragment();return so(t,_r,n.resolveNamespacePrefix?no.default(n.resolveNamespacePrefix):eo,e,n),e}function lo(t,n={}){const e=new Document;return so(t,Fr,eo,e,n),e}class co{constructor(t){this._=new Map,this.q=new Map,this.U=t}static new(){const t=new co(null);return t.add(null,null),t.add("xml",Ct),t.add("xmlns",Dt),t}add(t,n){const e=this.q.get(n);void 0===e?this.q.set(n,[t]):e.push(t),this._.set(t,n)}recordNamespaceInformation(t){const n=new co(this);for(const e of t.attributes){if(e.namespaceURI!==Dt)continue;const t=""===e.value?null:e.value,r=null===e.prefix?null:e.localName;n.add(r,t)}return n}B(t){return this._.get(t)}W(t){var n;return null===(n=this.U)||void 0===n?void 0:n.prefixToNamespace(t)}prefixToNamespace(t){const n=this.B(t);return void 0!==n?n:this.W(t)}shouldSerializeDeclaration(t,n){return this.prefixToNamespace(t)===n&&this.W(t)!==n}X(t,n){let e=this;for(;e;){const r=e.q.get(t);if(void 0!==r)for(let e=r.length-1;e>=0;--e){const o=r[e];if((n||null!==o)&&this.prefixToNamespace(o)===t)return o}e=e.U}}getPreferredPrefix(t,n){var e;if(t.namespaceURI===Ct)return"xml";const r=l(t);if(t.namespaceURI===Dt)return r&&null===t.prefix?null:"xmlns";if(r&&null===t.namespaceURI)return null;if(!r){let n=null!==(e=this.W(null))&&void 0!==e?e:null;if(t.namespaceURI===n)return null}if((!r||null!==t.prefix)&&this.prefixToNamespace(t.prefix)===t.namespaceURI)return t.prefix;const o=this.X(t.namespaceURI,!r);if(void 0!==o)return o;if(r){const e=this.B(t.prefix);if(!(null!==t.prefix&&(void 0===e||e===t.namespaceURI)))for(;;){const t=`ns${n.value}`;if(n.value+=1,void 0===this.B(t))return t}}return t.prefix}}const ao=["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function ho(t,n,e=!1){const r=e?[t]:t.childNodes,o=[];for(const t of r)fo(t,n,o);return o.join("")}function fo(t,n,e){const r=co.new(),o={value:1};try{mo(t,r,o,n,e)}catch(t){return I(t.message)}}function mo(t,n,e,r,o){switch(t.nodeType){case 1:return void function(t,n,e,r,o){const i=t;if(r&&(i.localName.indexOf(":")>=0||!Hr(i.localName)))throw new Error(`Can not serialize an element because the localName "${i.localName}" is not allowed.`);o.push("<");let s="",u=!1;const l=n.recordNamespaceInformation(i);if("xmlns"===i.prefix&&r)throw new Error('Can not serialize an element with prefix "xmlns" because it will not legally round-trip in a conforming XML parser.');const c=l.getPreferredPrefix(i,e);null!==c&&(s+=`${c}:`);s+=i.localName,o.push(s),l.prefixToNamespace(c)!==i.namespaceURI&&(l.add(c,i.namespaceURI),null===c?o.push(' xmlns="'):o.push(" xmlns:",c,'="'),o.push(po(i.namespaceURI,r),'"'));(function(t,n,e,r,o){const i=[];for(const s of t.attributes){let t=n.getPreferredPrefix(s,e);if(s.namespaceURI===Dt){const t=""===s.value?null:s.value;if(r&&t===Dt)throw new Error("The serialization of this attribute would produce invalid XML because the XMLNS namespace is reserved and cannot be applied as an element's namespace via XML parsing.");if(t===Ct||t===Dt)continue;const e=null===s.prefix?null:s.localName;if(r&&null!==s.prefix&&""===s.value)throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace. Use a default namespace declaration instead.");if(!n.shouldSerializeDeclaration(e,t))continue}if(r&&i.find((t=>t.localName===s.localName&&t.namespaceURI===s.namespaceURI)))throw new Error(`Can not serialize a duplicate attribute for namespaceURI "${s.namespaceURI}", localName "${s.localName}".`);if(i.push({namespaceURI:s.namespaceURI,localName:s.localName}),r&&(s.localName.indexOf(":")>=0||!Hr(s.localName)||"xmlns"===s.localName&&null===s.namespaceURI))throw new Error(`Can not serialize an attribute because the localName "${s.localName}" is not allowed.`);null!==t&&n.prefixToNamespace(t)!==s.namespaceURI&&(o.push(" xmlns:",t,'="',po(s.namespaceURI,r),'"'),n.add(t,s.namespaceURI)),o.push(" "),null!==t&&o.push(t,":"),o.push(s.localName,'="',po(s.value,r),'"')}})(i,l,e,r,o),i.namespaceURI===Tt&&!i.hasChildNodes()&&ao.indexOf(i.localName)>=0&&(o.push(" /"),u=!0);i.namespaceURI===Tt||i.hasChildNodes()||(o.push("/"),u=!0);if(o.push(">"),u)return;for(const n of t.childNodes)mo(n,l,e,r,o);o.push("</",s,">")}(t,n,e,r,o);case 9:return void function(t,n,e,r,o){const i=t;if(r&&null===i.documentElement)throw new Error("Can not serialize a document with no documentElement.");for(const t of i.childNodes)mo(t,n,e,r,o)}(t,n,e,r,o);case 8:return void function(t,n,e){const r=t;if(n&&(!Yr(r.data)||r.data.indexOf("--")>=0||r.data.endsWith("-")))throw new Error("Can not serialize a comment because it contains invalid characters.");e.push("\x3c!--",r.data,"--\x3e")}(t,r,o);case 4:return void function(t,n,e){const r=t;e.push("<![CDATA[",r.data,"]]>")}(t,0,o);case 3:return void function(t,n,e){const r=t;if(n&&!Yr(r.data))throw new Error("Can not serialize a text node because it contains invalid characters.");let o=r.data;o=o.replace(/&/g,"&amp;"),o=o.replace(/</g,"&lt;"),o=o.replace(/>/g,"&gt;"),e.push(o)}(t,r,o);case 11:return void function(t,n,e,r,o){for(const i of t.childNodes)mo(i,n,e,r,o)}(t,n,e,r,o);case 10:return void function(t,n,e){const r=t;if(n&&(o=r.publicId,!_e(o,0).success))throw new Error("Can not serialize a document type because the publicId contains invalid characters.");var o;if(n&&(!Yr(r.systemId)||r.systemId.indexOf('"')>=0&&r.systemId.indexOf("'")>=0))throw new Error("Can not serialize a document type because the systemId contains invalid characters.");e.push("<!DOCTYPE"),e.push(" "),e.push(r.name),""!==r.publicId&&e.push(' PUBLIC "',r.publicId,'"');""!==r.systemId&&""===r.publicId&&e.push(" SYSTEM");""!==r.systemId&&e.push(' "',r.systemId,'"');e.push(">")}(t,r,o);case 7:return void function(t,n,e){const r=t;if(n){if(r.target.indexOf(":")>=0)throw new Error(`Can not serialize a processing instruction because the target "${r.target}" may not contain ":".`);if("xml"===r.target.toLowerCase())throw new Error('Can not serialize a processing instruction because "xml" may not be used as target.')}if(n&&(!Yr(r.data)||r.data.indexOf("?>")>=0))throw new Error("Can not serialize a processing instruction because the data contains invalid characters.");e.push("<?",r.target," ",r.data,"?>")}(t,r,o);case 2:return;default:throw new TypeError("Only Nodes and Attr objects can be serialized by this algorithm.")}}function po(t,n){if(n&&null!==t&&!Yr(t))throw new Error("Can not serialize an attribute value because it contains invalid characters.");return null===t?"":t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&#9;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;")}class Element extends Node{get nodeType(){return 1}get nodeName(){return this.tagName}get nodeValue(){return null}set nodeValue(t){}get textContent(){return Q(this)}set textContent(t){K(this,t=lt(t))}lookupPrefix(t){return N(arguments,1),null===(t=ht(t))||""===t?null:It(this,t)}lookupNamespaceURI(t){if(N(arguments,1),""===(t=ht(t))&&(t=null),null!==this.namespaceURI&&this.prefix===t)return this.namespaceURI;let n=null;if(null!==t){const e=this.getAttributeNodeNS(Dt,t);e&&"xmlns"===e.prefix&&(n=e.value)}else{const t=this.getAttributeNodeNS(Dt,"xmlns");t&&null===t.prefix&&(n=t.value)}if(null!==n)return""!==n?n:null;const e=this.parentElement;return null===e?null:e.lookupNamespaceURI(t)}before(...t){nt(this,t)}after(...t){et(this,t)}replaceWith(...t){rt(this,t)}remove(){ot(this)}get children(){return O(this)}prepend(...t){J(this,t)}append(...t){Z(this,t)}replaceChildren(...t){tt(this,t)}get previousElementSibling(){return V(this)}get nextElementSibling(){return F(this)}constructor(t,n,e){super(),this.firstElementChild=null,this.lastElementChild=null,this.childElementCount=0,this.attributes=[],this.namespaceURI=t,this.prefix=n,this.localName=e,this.tagName=null===n?e:`${n}:${e}`}hasAttributes(){return this.attributes.length>0}getAttribute(t){N(arguments,1);const n=wo(t=String(t),this);return null===n?null:n.value}getAttributeNS(t,n){N(arguments,2);const e=yo(t=ht(t),n=String(n),this);return null===e?null:e.value}setAttribute(t,n){N(arguments,2),t=String(t),n=String(n),Hr(t)||$("The qualified name does not match the Name production");const e=wo(t,this);if(null===e){const e=new(s().Attr)(null,null,t,n,this);return e.ownerDocument=this.ownerDocument,void gt(e,this)}pt(e,n)}setAttributeNS(t,n,e){N(arguments,3),t=ht(t),n=String(n),e=String(e);const{namespace:r,prefix:o,localName:i}=At(t,n);!function(t,n,e,r,o){const i=yo(o,n,t);if(null===i){const i=new(s().Attr)(o,r,n,e,t);return i.ownerDocument=t.ownerDocument,void gt(i,t)}pt(i,e)}(this,i,e,o,r)}removeAttribute(t){N(arguments,1),vo(t=String(t),this)}removeAttributeNS(t,n){N(arguments,2),function(t,n,e){const r=yo(t,n,e);null!==r&&wt(r)}(t=ht(t),n=String(n),this)}toggleAttribute(t,n){Hr(t)||$("The qualified name does not match the Name production");if(null===wo(t,this)){if(void 0===n||!0===n){const n=new(s().Attr)(null,null,t,"",this);return n.ownerDocument=this.ownerDocument,gt(n,this),!0}return!1}return void 0!==n&&!1!==n||(vo(t,this),!1)}hasAttribute(t){return N(arguments,1),null!==wo(t=String(t),this)}hasAttributeNS(t,n){return N(arguments,2),null!==yo(t=ht(t),n=String(n),this)}getAttributeNode(t){return N(arguments,1),wo(t=String(t),this)}getAttributeNodeNS(t,n){return N(arguments,2),yo(t=ht(t),n=String(n),this)}setAttributeNode(t){return N(arguments,1),bo(t=ct(t,Attr),this)}setAttributeNodeNS(t){return N(arguments,1),bo(t=ct(t,Attr),this)}removeAttributeNode(t){return N(arguments,1),t=ct(t,Attr),this.attributes.indexOf(t)<0&&M("the specified attribute does not exist"),wt(t),t}getElementsByTagName(t){return N(arguments,1),b(t=String(t),this)}getElementsByTagNameNS(t,n){return N(arguments,2),v(t=ht(t),n=String(n),this)}C(t){const n=go(t,this.localName,this.namespaceURI,this.prefix);for(const e of this.attributes){const r=e.C(t);n.setAttributeNode(r)}return n}get innerHTML(){return ho(this,!0)}get outerHTML(){return ho(this,!0,!0)}}function go(t,n,e,r=null){let o=null;return o=new(s().Element)(e,r,n),o.ownerDocument=t,o}function wo(t,n){return n.attributes.find((n=>n.name===t))||null}function yo(t,n,e){return""===t&&(t=null),e.attributes.find((e=>e.namespaceURI===t&&e.localName===n))||null}function bo(t,n){null!==t.ownerElement&&t.ownerElement!==n&&function(t){throw T("InUseAttributeError",t)}("attribute is in use by another element");const e=yo(t.namespaceURI,t.localName,n);return e===t?t:(null!==e?function(t,n){const e=t.ownerElement;mt(t,e,t.value,n.value),e.attributes.splice(e.attributes.indexOf(t),1,n),n.ownerElement=e,t.ownerElement=null}(e,t):gt(t,n),e)}function vo(t,n){const e=wo(t,n);return null!==e&&wt(e),e}function xo(t,n,e){const{namespace:r,prefix:o,localName:i}=At(n,e);return go(t,i,r,o)}class DOMImplementation{constructor(t){this.Y=t}createDocumentType(t,n,e){N(arguments,3),t=String(t),n=String(n),e=String(e),$t(t);const r=new(s(this.Y).DocumentType)(t,n,e);return r.ownerDocument=this.Y,r}createDocument(t,n,e=null){N(arguments,2),t=ht(t),n=ut(n),e=at(e,DocumentType);const r=new(s(this.Y).XMLDocument);let o=null;return""!==n&&(o=xo(r,t,n)),e&&r.appendChild(e),o&&r.appendChild(o),r}createHTMLDocument(t){t=ht(t);const n=s(this.Y),e=new n.Document,r=new n.DocumentType("html");r.ownerDocument=e,e.appendChild(r);const o=go(e,"html",Tt);e.appendChild(o);const i=go(e,"head",Tt);if(o.appendChild(i),null!==t){const n=go(e,"title",Tt);i.appendChild(n),n.appendChild(e.createTextNode(t))}return o.appendChild(go(e,"body",Tt)),e}}class Document extends Node{get nodeType(){return 9}get nodeName(){return"#document"}get nodeValue(){return null}set nodeValue(t){}get textContent(){return null}set textContent(t){}lookupPrefix(t){return N(arguments,1),null!==this.documentElement?this.documentElement.lookupPrefix(t):null}lookupNamespaceURI(t){return N(arguments,1),null===this.documentElement?null:this.documentElement.lookupNamespaceURI(t)}get children(){return O(this)}prepend(...t){J(this,t)}append(...t){Z(this,t)}replaceChildren(...t){tt(this,t)}constructor(){super(),this.firstElementChild=null,this.lastElementChild=null,this.childElementCount=0,this.implementation=new DOMImplementation(this),this.doctype=null,this.documentElement=null}getElementsByTagName(t){return N(arguments,1),b(t=String(t),this)}getElementsByTagNameNS(t,n){return N(arguments,2),v(t=ht(t),n=String(n),this)}createElement(t){N(arguments,1),Hr(t=String(t))||$("The local name is not a valid Name");return go(this,t,null,null)}createElementNS(t,n){return N(arguments,2),xo(this,t=ht(t),n=String(n))}createDocumentFragment(){const t=new(s().DocumentFragment);return t.ownerDocument=this,t}createTextNode(t){N(arguments,1),t=String(t);const n=new(s().Text)(t);return n.ownerDocument=this,n}createCDATASection(t){N(arguments,1),(t=String(t)).indexOf("]]>")>=0&&$('Data must not contain the string "]]>"');const n=new(s().CDATASection)(t);return n.ownerDocument=this,n}createComment(t){N(arguments,1),t=String(t);const n=new(s().Comment)(t);return n.ownerDocument=this,n}createProcessingInstruction(t,n){N(arguments,2),t=String(t),n=String(n),Hr(t)||$("The target is not a valid Name"),n.indexOf("?>")>=0&&$('Data must not contain the string "?>"');const e=new(s().ProcessingInstruction)(t,n);return e.ownerDocument=this,e}importNode(t,n=!1){return N(arguments,1),u(t=ct(t,Node),9)&&R("importing a Document node is not supported"),x(t,n,this)}adoptNode(t){return N(arguments,1),u(t=ct(t,Node),9)&&R("adopting a Document node is not supported"),j(t,this),t}createAttribute(t){N(arguments,1),Hr(t=String(t))||$("The local name is not a valid Name");const n=new(s().Attr)(null,null,t,"",null);return n.ownerDocument=this,n}createAttributeNS(t,n){N(arguments,2),t=ht(t),n=String(n);const{namespace:e,prefix:r,localName:o}=At(t,n),i=new(s().Attr)(e,r,o,"",null);return i.ownerDocument=this,i}createRange(){const t=new(s().Range);return t.startContainer=this,t.startOffset=0,t.endContainer=this,t.endOffset=0,t}C(t){return new(s().Document)}}class DocumentFragment extends Node{get nodeType(){return 11}get nodeName(){return"#document-fragment"}get nodeValue(){return null}set nodeValue(t){}get textContent(){return Q(this)}set textContent(t){K(this,t=lt(t))}lookupPrefix(t){return N(arguments,1),null}lookupNamespaceURI(t){return N(arguments,1),null}get children(){return O(this)}prepend(...t){J(this,t)}append(...t){Z(this,t)}replaceChildren(...t){tt(this,t)}constructor(){super(),this.firstElementChild=null,this.lastElementChild=null,this.childElementCount=0;const t=s();this.ownerDocument=t.document}C(t){const n=new(s().DocumentFragment);return n.ownerDocument=t,n}}class ProcessingInstruction extends CharacterData{get nodeType(){return 7}get nodeName(){return this.target}constructor(t,n){super(n),this.target=t}C(t){const n=new(s().ProcessingInstruction)(this.target,this.data);return n.ownerDocument=t,n}}class No{constructor(t){u(t.startContainer,10,2)&&A("StaticRange startContainer must not be a doctype or attribute node"),u(t.endContainer,10,2)&&A("StaticRange endContainer must not be a doctype or attribute node"),this.startContainer=t.startContainer,this.startOffset=t.startOffset,this.endContainer=t.endContainer,this.endOffset=t.endOffset,this.collapsed=this.startContainer===this.endContainer&&this.startOffset===this.endOffset}}function So(t,n){if(t.collapsed)return;const e=m(t.startContainer),r=m(t.endContainer);let o=0;for(;o<e.length&&o<r.length&&e[o]===r[o];)++o;const i=t.endContainer.childNodes[t.endOffset]||null;for(let o=t.startContainer.childNodes[t.startOffset]||null;o&&o!==i&&o!==r[e.length];o=o.nextSibling)n(o);for(let t=e.length-1;t>=o;--t)for(let o=e[t].nextSibling;o&&o!==i&&o!==r[t];o=o.nextSibling)n(o);for(let t=o;t<r.length;++t)for(let e=r[t].firstChild;e&&e!==i&&e!==r[t+1];e=e.nextSibling)n(e)}function Eo(t,n){const e=p(t.startContainer),r=e.createDocumentFragment();if(t.collapsed)return r;const o=t.startContainer,i=t.startOffset,s=t.endContainer,l=t.endOffset;if(o===s&&c(o)){const t=o.cloneNode();return t.data=o.substringData(i,l-i),W(t,r),n||o.replaceData(i,l-i,""),r}const a=m(t.startContainer),h=m(t.endContainer);let f=0;for(;f<a.length&&f<h.length&&a[f]===h[f];)++f;const w=f===a.length,y=f===h.length;let b=null;w||(b=a[f]);let v=null;y||(v=h[f]);const x=[],N=b?b.nextSibling:o.childNodes[i],S=v||s.childNodes[l]||null;for(var E=N;E&&E!==S;E=E.nextSibling)u(E,10)&&C(n?"Can not clone a doctype using cloneContents":"Can not extract a doctype using extractContents"),x.push(E);let T,D;if(w||n)T=o,D=i;else{const t=a[f];T=t.parentNode,D=1+g(t)}if(null!==b&&c(b)){const t=b.cloneNode();t.data=b.substringData(i,b.length-i),W(t,r),n||b.replaceData(i,b.length-i,"")}else if(null!==b){const t=b.cloneNode();W(t,r);const s=e.createRange();s.setStart(o,i),s.setEnd(b,d(b));const u=Eo(s,n);s.detach(),W(u,t)}if(x.forEach((t=>{if(n){W(t.cloneNode(!0),r)}else W(t,r)})),v&&c(v)){const t=v.cloneNode();t.data=v.substringData(0,l),W(t,r),n||v.replaceData(0,l,"")}else if(null!==v){const t=v.cloneNode();W(t,r);const o=e.createRange();o.setStart(v,0),o.setEnd(s,l);const i=Eo(o,n);o.detach(),W(i,t)}return n||(t.setStart(T,D),t.collapse(!0)),r}class Range{get collapsed(){return(t=this).startContainer===t.endContainer&&t.startOffset===t.endOffset;var t}constructor(){const t=s();this.startContainer=t.document,this.startOffset=0,this.endContainer=t.document,this.endOffset=0,t.addRange(this)}get commonAncestorContainer(){const t=m(this.startContainer),n=m(this.endContainer);let e=t[0],r=0;for(;r<t.length&&r<n.length&&t[r]===n[r];)e=t[r],++r;return e}setStart(t,n){N(arguments,2),t=ct(t,Node),n=st(n),u(t,10)&&A("Can not set a range under a doctype node"),n>d(t)&&D("Can not set a range past the end of the node");Ao(this)===w(t)&&$o(t,n,this.endContainer,this.endOffset)!==Do||(this.endContainer=t,this.endOffset=n),this.startContainer=t,this.startOffset=n}setEnd(t,n){N(arguments,2),t=ct(t,Node),n=st(n),u(t,10)&&A("Can not set a range under a doctype node"),n>d(t)&&D("Can not set a range past the end of the node");Ao(this)===w(t)&&$o(t,n,this.startContainer,this.startOffset)!==To||(this.startContainer=t,this.startOffset=n),this.endContainer=t,this.endOffset=n}setStartBefore(t){N(arguments,1);const n=(t=ct(t,Node)).parentNode;if(null===n)return A("Can not set range before node without a parent");this.setStart(n,g(t))}setStartAfter(t){N(arguments,1);const n=(t=ct(t,Node)).parentNode;if(null===n)return A("Can not set range before node without a parent");this.setStart(n,g(t)+1)}setEndBefore(t){N(arguments,1);const n=(t=ct(t,Node)).parentNode;if(null===n)return A("Can not set range before node without a parent");this.setEnd(n,g(t))}setEndAfter(t){N(arguments,1);const n=(t=ct(t,Node)).parentNode;if(null===n)return A("Can not set range before node without a parent");this.setEnd(n,g(t)+1)}collapse(t=!1){t?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset)}selectNode(t){N(arguments,1);let n=(t=ct(t,Node)).parentNode;if(null===n)return A("Can not select node with null parent");const e=g(t);this.startContainer=n,this.startOffset=e,this.endContainer=n,this.endOffset=e+1}selectNodeContents(t){N(arguments,1),u(t=ct(t,Node),10)&&A("Can not place range inside a doctype node");const n=d(t);this.startContainer=t,this.startOffset=0,this.endContainer=t,this.endOffset=n}compareBoundaryPoints(t,n){switch(N(arguments,2),n=ct(n,Range),t!==Range.START_TO_START&&t!==Range.START_TO_END&&t!==Range.END_TO_END&&t!==Range.END_TO_START&&R("Unsupported comparison type"),Ao(this)!==Ao(n)&&P("Can not compare positions of ranges in different trees"),t){case Range.START_TO_START:return $o(this.startContainer,this.startOffset,n.startContainer,n.startOffset);case Range.START_TO_END:return $o(this.endContainer,this.endOffset,n.startContainer,n.startOffset);case Range.END_TO_END:return $o(this.endContainer,this.endOffset,n.endContainer,n.endOffset);default:return $o(this.startContainer,this.startOffset,n.endContainer,n.endOffset)}}deleteContents(){if(this.collapsed)return;const t=this.startContainer,n=this.startOffset,e=this.endContainer,r=this.endOffset;if(t===e&&c(t))return void t.replaceData(n,r-n,"");const o=[];let i,s;if(So(this,(t=>{o.push(t)})),t.contains(e))i=t,s=n;else{let n=t;for(;null!==n.parentNode&&!n.parentNode.contains(e);)n=n.parentNode;i=n.parentNode,s=1+g(n)}c(t)&&t.replaceData(n,t.length-n,""),o.forEach((t=>{H(t)})),c(e)&&e.replaceData(0,r,""),this.setStart(i,s),this.collapse(!0)}extractContents(){return Eo(this,!1)}cloneContents(){return Eo(this,!0)}insertNode(t){N(arguments,1),it(t=ct(t,Node),this)}surroundContents(t){N(arguments,1),t=ct(t,Node);(a(this.startContainer)?this.startContainer.parentNode:this.startContainer)!==(a(this.endContainer)?this.endContainer.parentNode:this.endContainer)&&I("Can not use surroundContents on a range that has partially selected a non-Text node"),u(t,9,10,11)&&A("Can not use Document, DocumentType, or DocumentFragment as a parent node in surroundContents");const n=Eo(this,!1);t.firstChild&&Y(null,t),it(t,this),W(n,t),this.selectNode(t)}cloneRange(){const t=new(s().Range);return t.startContainer=this.startContainer,t.startOffset=this.startOffset,t.endContainer=this.endContainer,t.endOffset=this.endOffset,t}detach(){s().removeRange(this)}isPointInRange(t,n){return N(arguments,2),t=ct(t,Node),n=st(n),w(t)===Ao(this)&&(u(t,10)&&A("Point can not be under a doctype"),n>d(t)&&D("Offset should not be past the end of node"),$o(t,n,this.startContainer,this.startOffset)!==To&&$o(t,n,this.endContainer,this.endOffset)!==Do)}comparePoint(t,n){return N(arguments,2),t=ct(t,Node),n=st(n),w(t)!==Ao(this)&&P("Can not compare point to range in different trees"),u(t,10)&&A("Point can not be under a doctype"),n>d(t)&&D("Offset should not be past the end of node"),$o(t,n,this.startContainer,this.startOffset)===To?-1:$o(t,n,this.endContainer,this.endOffset)===Do?1:0}intersectsNode(t){if(N(arguments,1),w(t=ct(t,Node))!==Ao(this))return!1;const n=t.parentNode;if(null===n)return!0;const e=g(t);return $o(n,e,this.endContainer,this.endOffset)===To&&$o(n,e+1,this.startContainer,this.startOffset)===Do}toString(){let t=[];const n=this.startContainer;if(a(n)){if(this.startContainer===this.endContainer)return n.substringData(this.startOffset,this.endOffset-this.startOffset);t.push(n.substringData(this.startOffset,n.length-this.startOffset))}So(this,(n=>{y(n,(n=>{a(n)&&t.push(n.data)}))}));const e=this.endContainer;return a(e)&&t.push(e.substringData(0,this.endOffset)),t.join("")}}Range.START_TO_START=0,Range.START_TO_END=1,Range.END_TO_END=2,Range.END_TO_START=3;const To=-1,Co=0,Do=1;function $o(t,n,e,r){if(t!==e){const o=m(t),i=m(e);for(;o[0]&&i[0]&&o[0]===i[0];)o.shift(),i.shift();o.length&&(n=g(o[0])+.5),i.length&&(r=g(i[0])+.5)}return n===r?Co:n<r?To:Do}function Ao(t){return w(t.startContainer)}class XMLDocument extends Document{C(t){return new(s().XMLDocument)}}class DOMParser{constructor(){}parseFromString(t,n){switch(n){case"text/html":throw new Error("HTML parsing is not implemented");case"text/xml":case"application/xml":case"application/xhtml+xml":case"image/svg+xml":try{return lo(t)}catch(t){const n=new Document,e=n.createElementNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","parsererror");return e.appendChild(n.createTextNode(`${t}`)),n.appendChild(e),n}default:throw new TypeError(`The type "${n}" is not a valid value in the SupportedType enumeration.`)}}}class XMLSerializer{constructor(){}serializeToString(t){const n=[];return fo(t=ct(t,Node),!1,n),n.join("")}}function Io(t){const n=[];return fo(t=ct(t,Node),!0,n),n.join("")}class MutationObserver{constructor(t){this.u=[],this.m=[],this.t=[],N(arguments,1),t=ct(t,Function),this.v=t}observe(t,n){if(N(arguments,2),t=ct(t,Node),n.childList=!!n.childList,n.subtree=!!n.subtree,void 0!==n.attributeOldValue&&void 0===n.attributes&&(n.attributes=!0),void 0!==n.characterDataOldValue&&void 0===n.characterData&&(n.characterData=!0),!(n.childList||n.attributes||n.characterData))throw new TypeError('The options object must set at least one of "attributes", "characterData", or "childList" to true.');if(n.attributeOldValue&&!n.attributes)throw new TypeError('The options object may only set "attributeOldValue" to true when "attributes" is true or not present.');if(n.characterDataOldValue&&!n.characterData)throw new TypeError('The options object may only set "characterDataOldValue" to true when "characterData" is true or not present.');t.o.register(this,n)}disconnect(){this.u.forEach((t=>t.o.removeForObserver(this))),this.u.length=0,this.m.length=0}takeRecords(){const t=this.m.concat();return this.m.length=0,t}}const ko=new Document;i.document=ko,i.Attr=Attr,i.CDATASection=CDATASection,i.Comment=xt,i.Document=Document,i.DocumentFragment=DocumentFragment,i.DocumentType=DocumentType,i.DOMImplementation=DOMImplementation,i.Element=Element,i.ProcessingInstruction=ProcessingInstruction,i.Range=Range,i.Text=Text,i.XMLDocument=XMLDocument;export{Attr,CDATASection,CharacterData,xt as Comment,E as DOMException,DOMImplementation,DOMParser,Document,DocumentFragment,DocumentType,Element,MutationObserver,L as MutationRecord,Node,ProcessingInstruction,Range,No as StaticRange,Text,XMLDocument,XMLSerializer,ko as document,lo as parseXmlDocument,uo as parseXmlFragment,Io as serializeToWellFormedString,Et as unsafeAppendAttribute,Nt as unsafeCreateAttribute,St as unsafeCreateElement};
//# sourceMappingURL=slimdom.esm.js.map
