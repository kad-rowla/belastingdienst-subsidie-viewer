import { isArray } from "lodash-es";
import { md5OfArray } from "./index.js";
import { Context } from "../generic/index.js";
import Etl from "../generic/Etl.js";
import { isStatic } from "../ratt/middlewares/assertions/term/str.js";
/**
 * Creates a MD5 hash of String(s) (Keys and/or Statics)
 *
 * @param ctx A Etl Context
 * @param content Static String(s) or Key string(s)
 * @returns Hex value of MD5 hash
 */
export default function (ctx, content) {
    if (ctx === null) {
        ctx = new Context(new Etl());
    }
    const hashSrc = (isArray(content) ? content : [content])
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        .map((value, index) => isStatic(value)
        ? `${index}:${JSON.stringify(value.toString())}`
        : `${index}:${JSON.stringify(ctx?.hasKey(value.toString()) ? ctx?.getAny(value.toString()) : "")}`);
    return md5OfArray(hashSrc);
}
//# sourceMappingURL=hashify.js.map