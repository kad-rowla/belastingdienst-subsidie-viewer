import { rdf } from "@triplyetl/vocabularies";
import { Destination, Etl, fromOai, toRdf } from "../generic/index.js";
import { triple, iri } from "../ratt/index.js";
import { getFactory } from "@triplydb/data-factory";
const dataFactory = getFactory({ skipValidation: Etl.skipValidation });
export default async function () {
    const app = new Etl({ defaultGraph: "https://default.com/" });
    const tenDaysAgo = new Date();
    tenDaysAgo.setDate(tenDaysAgo.getDate() - 10);
    app.use(fromOai({
        since: tenDaysAgo,
        url: "http://api.socialhistoryservices.org/solr/all/oai",
        metadataPrefix: "marcxml",
        cacheOverride: "use cache",
        // maxCacheAgeDays: -1,  // use this to clear the cache
    }));
    app.use(triple(iri("header.identifier"), rdf.type, dataFactory.namedNode("http://Record")));
    app.use(toRdf(Destination.file("data/out.nt")));
    return app;
}
//# sourceMappingURL=test_fromOai_MARC.js.map