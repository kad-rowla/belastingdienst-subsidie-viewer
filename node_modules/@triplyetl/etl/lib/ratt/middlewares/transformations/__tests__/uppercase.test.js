import chai from "chai";
import chaiAsPromised from "chai-as-promised";
import * as transform from "../index.js";
import { addValue } from "../index.js";
import { str } from "../../../index.js";
import { getEtlForTesting } from "../../../__tests__/getEtlForTesting.js";
chai.use(chaiAsPromised);
const assert = chai.assert;
describe("Transform.uppercase ", () => {
    it("should work on static strings", () => {
        const strings = ["String", "string", "StrinG", "STRING", "€", "&hellip;"].map((val) => str(val));
        const etl = getEtlForTesting();
        strings.forEach((val, ix) => etl.use(transform.uppercase({ key: `key${ix}`, content: val })));
        etl.use([
            async (ctx, next) => {
                strings.forEach((val, ix) => {
                    assert.equal(ctx.getString(`key${ix}`), val.toUpperCase());
                });
                return next();
            },
        ]);
        return etl.run();
    });
    it("should work on keys", () => {
        const strings = ["String", "string", "StrinG", "STRING", "€", "&hellip;"].map((val) => str(val));
        const etl = getEtlForTesting();
        strings.forEach((val, ix) => {
            etl.use(addValue({ key: `key${ix}`, content: val }));
            etl.use(transform.uppercase({ key: `key${ix}_uppercase`, content: `key${ix}` }));
        });
        etl.use([
            async (ctx, next) => {
                strings.forEach((content, ix) => {
                    assert.equal(ctx.getString(`key${ix}`), content.toString());
                    assert.equal(ctx.getString(`key${ix}_uppercase`), content.toUpperCase());
                });
                return next();
            },
        ]);
        return etl.run();
    });
});
//# sourceMappingURL=uppercase.test.js.map