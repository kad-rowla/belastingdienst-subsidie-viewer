import { get } from "lodash-es";
import TriplyDb from "@triply/triplydb/App.js";
export function getTriplyDb(app, triplyDbInstanceOrConfiguration) {
    //Custom triplydb instance/configuration given as argument
    if (triplyDbInstanceOrConfiguration) {
        if (triplyDbInstanceOrConfiguration instanceof TriplyDb)
            return triplyDbInstanceOrConfiguration;
        const extraConfig = {};
        if (get(process.env, "TRIPLYDB_TOKEN"))
            extraConfig.token = get(process.env, "TRIPLYDB_TOKEN");
        if (get(process.env, "TRIPLYDB_API"))
            extraConfig.token = get(process.env, "TRIPLYDB_API");
        if (get(process.env, "TRIPLYDB_HTTP_PROXY"))
            extraConfig.httpProxy = get(process.env, "TRIPLYDB_HTTP_PROXY");
        if (get(process.env, "TRIPLYDB_HTTPS_PROXY"))
            extraConfig.httpProxy = get(process.env, "TRIPLYDB_HTTPS_PROXY");
        return TriplyDb.get({ ...extraConfig, ...triplyDbInstanceOrConfiguration });
    }
    return app.triplyDb;
}
//# sourceMappingURL=index.js.map