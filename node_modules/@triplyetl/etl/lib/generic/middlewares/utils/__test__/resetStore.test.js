import chai from "chai";
import { getEtlForTesting } from "../../../../ratt/__tests__/getEtlForTesting.js";
import { triple } from "../../../../ratt/index.js";
import { a } from "@triplyetl/vocabularies";
import { resetStore } from "../../../index.js";
describe("resetStore", () => {
    it("should work on empty stores", async () => {
        const etl = getEtlForTesting([
            async (ctx, next) => {
                chai.expect(ctx.store.size).equal(0);
                return next();
            },
            resetStore(),
            async (ctx, next) => {
                chai.expect(ctx.store.size).equal(0);
                return next();
            },
        ]);
        await etl.run();
    });
    it("should work on non-empty stores", async () => {
        const etl = getEtlForTesting([
            triple(a, a, a),
            async (ctx, next) => {
                chai.expect(ctx.store.size).equal(1);
                return next();
            },
            resetStore(),
            async (ctx, next) => {
                chai.expect(ctx.store.size).equal(0);
                return next();
            },
        ]);
        await etl.run();
    });
});
//# sourceMappingURL=resetStore.test.js.map