import Iri from "../Iri.js";
import Etl from "../Etl.js";
import { iri, triple } from "../../ratt/index.js";
import { a, aat, owl, sdo } from "@triplyetl/vocabularies";
import { fromJson } from "../index.js";
import { assert } from "chai";
describe("Test Iri", () => {
    it("should implement https://git.triply.cc/triply/etl/-/issues/265#note_54174", async () => {
        const base = Iri("https://example.com/");
        const id = base.concat("id/");
        const dataset = id.concat("dataset/");
        const person = id.concat("person/");
        const o = aat.concat("02320");
        const etl = new Etl();
        etl.use(fromJson({ "@priref": 666, type: 123456, name: "ds" }), triple(iri(person, "@priref"), a, sdo.Person), triple(iri(person, "@priref"), sdo.additionalType, o), triple(iri(person, "@priref"), sdo.additionalType, iri(aat, "type")), triple(iri(dataset, "name"), owl.imports, sdo.toIri()), async (ctx, next) => {
            assert.equal(ctx.store.size, 4);
            return next();
        });
        await etl.run();
    });
});
//# sourceMappingURL=Iri.test.js.map