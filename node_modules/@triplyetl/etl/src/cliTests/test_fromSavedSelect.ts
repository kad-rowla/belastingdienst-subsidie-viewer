import { Etl, fromJson, Source } from "../generic/index.js";
import { logRecord } from "../debug/index.js";

export default async function (): Promise<Etl> {
  const app = new Etl({
    defaultGraph: "https://default.com/",
    sources: {
      query: Source.TriplyDb.query("martin", "Pika-basics", { triplyDb: { url: "https://api.triplydb.com" } }),
    },
  });

  app.use(fromJson(app.sources.query), logRecord());

  return app;
}
