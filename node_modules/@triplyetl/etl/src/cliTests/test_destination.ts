import { a } from "@triplyetl/vocabularies";
import { Destination, Etl, Source, toRdf } from "../generic/index.js";
import { quad } from "../ratt/index.js";

export default async function (): Promise<Etl> {
  const app = new Etl({
    defaultGraph: "https://default.com/",
    sources: {
      test: Source.TriplyDb.asset("accountname", "datasetname", { name: "sdf" }),
    },
    destinations: {
      /**
       * Assuming we have a TRIPLYDB_TOKEN env variable for LaurensRietveld
       */
      somedataset: Destination.TriplyDb.rdf("somedataset", { overwrite: true }),
      // someOtherdataset: Destination.TriplyDb.rdf("somedataset", { overwrite: true }),
    },
  });

  app.use(quad(a, a, a, a));
  app.use(toRdf(app.destinations.somedataset));
  // app.use(toRdf(app.destinations.someOtherdataset));
  return app;
}
