import { a } from "@triplyetl/vocabularies";
import { Destination, Etl, toRdf } from "../generic/index.js";
import { quad } from "../ratt/index.js";

export default async function (): Promise<Etl> {
  const app = new Etl({
    defaultGraph: "https://default.com/",
    destinations: {
      syncTestOut: Destination.TriplyDb.rdf("sync-test-output", {
        overwrite: true,
        /**
         * Uncomment this line to enable service synchronization. Services must already exist in the
         * dataset.
         */
        synchronizeServices: true,
      }),
    },
  });

  app.use(quad(a, a, a, a));
  app.use(toRdf(app.destinations.syncTestOut));

  return app;
}
