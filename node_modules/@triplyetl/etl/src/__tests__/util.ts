import { expect } from "chai";
import { Middleware } from "../generic/index.js";
import Store from "../generic/Store.js";

export function expectNoBlankNodes(store: Store) {
  for (const quad of store.getQuads({})) {
    for (const position of ["subject", "predicate", "object", "graph"] as ["subject", "predicate", "object", "graph"]) {
      expect(quad[position].termType).not.to.equal("BlankNode");
    }
  }
}

export const expectNoBlankNodesMw: Middleware = async function expectNoBlankNodesMw(ctx, next) {
  expectNoBlankNodes(ctx.store);
  return next();
};
