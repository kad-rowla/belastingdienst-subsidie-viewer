import { ContentType, SourceGetter, StringSourceInfo } from "./index.js";
import { castArray } from "lodash-es";

export default function string(oneOrMoreStrings: string | string[]): SourceGetter<ContentType, StringSourceInfo> {
  const sourceInfos: StringSourceInfo[] = castArray(oneOrMoreStrings).map((string) => {
    return {
      name: string.slice(20),
      id: async () => string,
      mediaType: async () => "text/plain",
      getString: async () => string,
      getSize: async () => Buffer.byteLength(string, "utf8"),
    };
  });
  return {
    get: async () => sourceInfos,
  };
}
