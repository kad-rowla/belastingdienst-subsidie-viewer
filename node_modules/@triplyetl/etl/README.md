# TriplyETL

[Extract/Transform/Load](https://en.wikipedia.org/wiki/Extract,_transform,_load) (ETL) application including the RATT transformation and assertion language.

## For internal users of TriplyETL

1. Create your own TriplyETL License Key. This is called an "NPM Token" on [this page](https://git.triply.cc/triplydb/npm/shared/-/settings/access_tokens). Use "read_api" access and role of "Developer".
2. Use TriplyETL as a library according to the [public documentation](https://triply.cc/docs/triply-etl/getting-started/#library).

## For developers of TriplyETL

### Installation

```bash
git clone https://git.triply.cc/triply/etl.git
cd etl
npm install
npm run build
```
### To publish a new version:
- Run `npm version [patch|minor|major]`
- The CI will automatically publish the NPM package

For creating a release candidate, use this this: `npm version prerelease --preid rc`. If your current version is `5.0.x` this will create `5.0.x-rc.1`, If you are already on a prerelease version it will increment the prerelease number with 1.

### Increasing memory usage

To increase the memory usage of Etl, export the following environment variable before calling the Etl runner:
```
export NODE_OPTIONS=--max-old-space-size=8192  # increase max memory to 8GB
```

### Using local package in a Yarn classic repo:

THIS IS PROBABLY OUTDATED !!!!

In your project folder where you are creating an ETL, and have `@triplyetl/etl` as a dependency, open the `package.json` file.
The dependency list should resemble the following:
```json
"dependencies": {
    "@triplyetl/etl": "latest",
    ...
}
```
Change `latest` or whatever semver (eg: `1.0.1`) to either:
- relative path: `"link:./../etl"`
- absolute path: `"link:/home/user/folder/etl"`

The end result should look something like the following:
```json
"dependencies": {
    "@triplyetl/etl": "link:./../etl",
    ...
}
```
Afterwards, run `npm install` or `npm i` again to update the dependency.
