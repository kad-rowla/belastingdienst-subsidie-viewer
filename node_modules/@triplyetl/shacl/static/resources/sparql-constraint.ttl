# https://www.w3.org/TR/shacl/#sparql-constraints
@prefix ex: <http://example.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> . # W3C Shapes Constraint Language (SHACL) Vocabulary
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> . # XML Schema Definition

ex:
	sh:declare [
		sh:prefix "ex" ;
		sh:namespace "http://example.org/"^^xsd:anyURI ;
	] .

ex:LanguageExampleShape
	a sh:NodeShape ;
	sh:targetClass ex:Country ;
	sh:sparql [
		a sh:SPARQLConstraint ;   # This triple is optional
		sh:message "Values are literals with German language tag ({?lang})." ;
		sh:prefixes ex: ;
		sh:select """
			SELECT $this (ex:germanLabel AS ?path) ?value ?lang
			WHERE {
				bind("de" as ?lang)
				$this ex:germanLabel ?value .
				FILTER (!isLiteral(?value) || !langMatches(lang(?value), "de"))
			}
			""" ;
	] .

ex:ValidCountry a ex:Country ;
	ex:germanLabel "Spanien"@de .
  
ex:InvalidCountry a ex:Country ;
	ex:germanLabel "Spain"@en .
