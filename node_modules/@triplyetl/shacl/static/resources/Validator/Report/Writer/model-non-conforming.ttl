# External prefix declarations
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix html: <https://data.rijksfinancien.nl/html/model/def/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sdo: <https://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# Project-specific prefix
prefix ex: <https://example.org/>
@prefix graph: <https://example.org/graph/> .
@prefix shp: <https://example.org/model/shp/> .

  shp:Person
    a sh:NodeShape;
    # sh:ClosedConstraintComponent
    sh:closed true;
    sh:ignoredProperties ( rdf:type );
    sh:property
      shp:Person_birthDate,
      shp:Person_deathDate,
      shp:Person_description,
      shp:Person_email,
      shp:Person_familyName,
      shp:Person_givenName,
      shp:Person_knows,
      shp:Person_name,
      shp:Person_sameAs;
    sh:targetClass sdo:Person.

  # sh:DatatypeConstraintComponent
  shp:Person_birthDate
    a sh:PropertyShape;
    sh:datatype xsd:date;
    sh:lessThanOrEquals sdo:deathDate;
    sh:path sdo:birthDate
    .

  # sh:MaxExclusiveConstraintComponent
  # sh:MinExclusiveConstraintComponent
  shp:Person_deathDate
    a sh:PropertyShape;
    sh:datatype xsd:date;
    sh:maxExclusive "2000-01-01"^^xsd:date;
    sh:minExclusive "1900-01-01"^^xsd:date;
    sh:path sdo:deathDate.

  # sh:LanguageInConstraintComponent
  # sh:UniqueLangConstraintComponent
  shp:Person_description
    a sh:PropertyShape;
    sh:maxCount 2;
    sh:minCount 2;
    sh:languageIn ( "en" "fr" );
    sh:path sdo:description;
    sh:uniqueLang true.

  # sh:MinCountConstraintComponent
  shp:Person_email
    a sh:PropertyShape;
    sh:datatype xsd:anyURI;
    sh:minCount 1;
    sh:path sdo:email.

  # sh:HasValueConstraintComponent
  shp:Person_familyName
    a sh:PropertyShape;
    sh:hasValue "Byron";
    sh:path sdo:familyName.

  # sh:InConstraintComponent
  shp:Person_givenName
    a sh:PropertyShape;
    sh:in ("Donald"@en);
    sh:path sdo:givenName.

  # sh:ClassConstraintComponent
  # sh:MaxCountConstraintComponent
  shp:Person_knows
    a sh:PropertyShape;
    sh:class sdo:Person;
    sh:maxCount 1;
    sh:path sdo:knows.

  # sh:MaxCountConstraintComponent
  # sh:MaxLengthConstraintComponent
  # sh:MinLengthConstraintComponent
  shp:Person_name
    a sh:PropertyShape;
    sh:maxCount 1;
    sh:maxLength 2;
    sh:minLength 1;
    sh:path sdo:name.

  # sh:NodeKindConstraintComponent
  shp:Person_sameAs
    a sh:PropertyShape;
    sh:nodeKind sh:IRI ;
    sh:path owl:sameAs .

ex:AddressShape
	a sh:NodeShape ;
	sh:property [
		sh:path ex:postalCode ;
		sh:datatype xsd:string ;
		sh:maxCount 1 ;
	] .

ex:PersonShape
	a sh:NodeShape ;
	sh:targetClass ex:Person ;
	sh:property ex:PersonShape_node .

ex:PersonShape_node 
  a sh:PropertyShape ;
  sh:path ex:address ;
  sh:minCount 1 ;
  sh:node ex:AddressShape .

ex:PatternExampleShape
	a sh:NodeShape ;
	sh:targetNode ex:Bob, ex:Alice, ex:Carol ;
	sh:property ex:PatternExampleShape_pattern .

ex:PatternExampleShape_pattern 
  sh:path ex:bCode ;
	sh:pattern "^B" ;    # starts with 'B'
	sh:flags "i" .       # Ignore case
