export default `
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
prefix sh: <http://www.w3.org/ns/shacl#> 
prefix xsd: <http://www.w3.org/2001/XMLSchema#>
select ?shape ?varName ?value ?target (concat(if(bound(?declarations), concat(?declarations, "\\n"), ''), ?select) as ?query) where {
  select ?shape ?varName ?value ?select ?target (group_concat(?declaration; separator="\\n") as ?declarations) where {
    ?shape sh:target ?target .
    ?target a/a sh:SPARQLTargetType .
    ?target a ?SPARQLTargetType .
    ?SPARQLTargetType sh:parameter/sh:path ?variable .
    ?SPARQLTargetType sh:select ?select .
    ?target ?variable ?value .
    bind(replace(str(?variable),'.*[/#]','') as ?varName)
    optional {
      ?SPARQLTargetType sh:prefixes/sh:declare ?declare .
      ?declare sh:prefix ?prefix; sh:namespace ?namespace .
      bind(concat('prefix ', ?prefix, ': ', '<', str(?namespace), '>') as ?declaration)
    }
    optional {
      ?SPARQLTargetType sh:parameter/sh:class ?class .
      ?value a/rdfs:subClassOf* ?class
    }
    optional {?SPARQLTargetType sh:parameter/sh:class ?classDefined .}
    filter((bound(?classDefined) && bound(?class)) || bound(?classDefined) = false)
  } group by ?shape ?varName ?value ?select ?target
}
`
