export default `
prefix sh: <http://www.w3.org/ns/shacl#> 
prefix xsd: <http://www.w3.org/2001/XMLSchema#>

select ?SPARQLConstraint ?shape ?message ?severity (concat(coalesce(?declarations, ''), "\\n", ?select) as ?query) where {
  select 
    ?shape 
    ?select 
    ?SPARQLConstraint 
    (group_concat(?declaration; separator="\\n") as ?declarations)
    (sample(?messages) as ?message)
    (sample(?severities) as ?severity)
  where {
    ?shape sh:sparql ?SPARQLConstraint .
    ?SPARQLConstraint sh:select ?select .
    optional {
      ?target sh:prefixes/sh:declare ?declare .
      ?declare sh:prefix ?prefix; sh:namespace ?namespace .
      bind(concat('prefix ', ?prefix, ': ', '<', str(?namespace), '>') as ?declaration)
    }
    optional { ?SPARQLConstraint sh:message ?messages }
    optional { ?SPARQLConstraint sh:severity ?severities }
  } group by ?shape ?select ?SPARQLConstraint 
}
`
