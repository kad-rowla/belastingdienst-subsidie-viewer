export default `
prefix sh: <http://www.w3.org/ns/shacl#> 
prefix def: <https://triplydb.com/model/def/>
prefix xsd: <http://www.w3.org/2001/XMLSchema#>

select 
  ?component
  ?labelTemplate
  ?path
  ?nodeShape
  ?validator
  ?value
  ?propertyPath
  ?focusNode
  ?focusNodeValue
  (concat(group_concat(coalesce(?declaration, ""); separator="\\n"), ?select) as ?query)
where {
  ?component a sh:ConstraintComponent .
  optional { ?component sh:labelTemplate ?labelTemplate }
  ?component sh:parameter/sh:path ?path .
  ?nodeShape sh:property ?propertyShape .
  optional { ?component sh:propertyValidator ?propertyValidator . }
  optional { ?component sh:nodeValidator ?nodeValidator . }
  bind(coalesce(?propertyValidator, ?nodeValidator) as ?validator)
  ?validator a sh:SPARQLSelectValidator .
  ?validator sh:select ?select .
  optional { ?validator sh:message ?message }
  ?propertyShape ?path ?value; sh:path ?propertyPath .
  ?focusNode ?propertyPath ?focusNodeValue .
  optional {
    ?validator sh:prefixes/sh:declare ?declare .
    ?declare sh:prefix ?prefix; sh:namespace ?namespace .
    bind(concat('prefix ', ?prefix, ': ', '<', str(?namespace), '>') as ?declaration)
  }
} group by ?component ?labelTemplate ?path ?nodeShape ?validator ?value ?select ?propertyPath ?focusNode ?focusNodeValue
`
