export default `
prefix sh: <http://www.w3.org/ns/shacl#> 
prefix xsd: <http://www.w3.org/2001/XMLSchema#>

select ?shape (concat(coalesce(?declarations,''), "\\n", ?select) as ?query) where {
  select ?shape ?select (group_concat(?declaration; separator="\\n") as ?declarations)
  where {
      ?shape sh:target ?target .
      ?target sh:select ?select .
      optional {
        ?target sh:prefixes/sh:declare ?declare .
        ?declare sh:prefix ?prefix; sh:namespace ?namespace .
        bind(concat('prefix ', ?prefix, ': ', '<', str(?namespace), '>') as ?declaration)
      }
    } 
  group by ?shape ?select
}
`
