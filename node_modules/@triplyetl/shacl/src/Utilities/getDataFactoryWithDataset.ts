import { type DefaultFactory, Store, getFactory } from '@triplydb/data-factory'
import { type Quad } from '@triplydb/data-factory/Terms.js'

export interface DefaultFactoryWithDataset extends DefaultFactory {
  dataset: (quads?: Quad[]) => Store
}

const getDatasetFactory = (quads?: Quad[]): Store => new Store(quads ?? [], { factory: getFactory() })
export default function getDataFactoryWithDataset (factory?: DefaultFactory): DefaultFactoryWithDataset {
  return { ...factory ?? getFactory(), dataset: getDatasetFactory }
}
