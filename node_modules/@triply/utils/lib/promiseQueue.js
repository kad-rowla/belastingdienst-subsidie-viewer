import { range } from "lodash-es";
export default async function promiseQueue(getters, opts) {
    const stack = [...getters];
    const result = [];
    async function getFromStack() {
        const getter = stack.shift();
        if (getter === undefined)
            return;
        result.push(await getter());
        await getFromStack();
    }
    await Promise.all(range(opts.concurrent).map(() => getFromStack()));
    return result;
}
//# sourceMappingURL=promiseQueue.js.map